{"version":3,"file":"static/js/974.50c8be9b.chunk.js","mappings":"qJAEIA,EAAgC,WAChC,SAASA,EAAeC,EAAgBC,EAAcC,QAClC,IAAZA,IAAsBA,EAAU,CAAC,GACrCC,KAAKC,OAAS,OACdD,KAAKD,QAAUA,EACfC,KAAKF,aAAeA,EACpBE,KAAKH,eAAiBA,CAC1B,CA0BA,OAtBAD,EAAeM,UAAUC,cAAgB,SAAUJ,IAC1CK,EAAAA,EAAAA,GAAOJ,KAAKD,QAASA,KACtBC,KAAKD,QAAUA,EACfC,KAAKK,gBAEb,EACAT,EAAeM,UAAUG,cAAgB,SAAUC,EAAeC,GAE9D,WADsB,IAAlBD,IAA4BA,EAAgBN,KAAKF,cAC/CU,MAAM,yBAChB,EACAZ,EAAeM,UAAUO,QAAU,WAC/B,MAAMD,MAAM,yBAChB,EAIAZ,EAAeM,UAAUQ,SAAW,SAAUC,GAC1C,MAAMH,MAAM,yBAChB,EACAZ,EAAeM,UAAUU,OAAS,SAAUC,GACxC,MAAML,MAAM,yBAChB,EACOZ,CACX,CAlCoC,E,oMCqDhCkB,E,oBApDAC,EAA8B,WAC9B,SAASA,IACLf,KAAKgB,UAAY,CAAC,EAClBhB,KAAKiB,eAAiB,EACtBjB,KAAKkB,UAAYC,KAAKC,MAAsB,IAAhBD,KAAKE,UACjCrB,KAAKgB,UAAY,EACrB,CAsBA,OArBAD,EAAab,UAAUoB,QAAU,WAC7BtB,KAAKgB,UAAY,CAAC,EAClBhB,KAAKiB,eAAiB,CAC1B,EACAF,EAAab,UAAUQ,SAAW,SAAUa,GACxCC,OAAOC,OAAOzB,KAAKgB,WAAWU,SAAQ,SAAUC,GAAY,OAAOA,EAASJ,EAAU,GAC1F,EACAR,EAAab,UAAUyB,SAAW,SAAUA,GACxC,IAAIC,EAAQ5B,KACZ,GAAwB,oBAAb2B,EACP,OAAO,WAEP,EAEJ,IAAIE,EAAa7B,KAAKiB,eAGtB,OAFAjB,KAAKgB,UAAUa,GAAcF,EAC7B3B,KAAKiB,iBACE,kBACIW,EAAMZ,UAAUa,EAC3B,CACJ,EACOd,CACX,CA7BkC,GA+BlC,SAASe,EAAUC,GACf,MAAO,YAAYC,KAAKD,EAC5B,CACA,SAASE,EAAQF,GACb,MAAO,WAAWC,KAAKD,EAC3B,CAIA,SAASG,EAAWH,GAChB,MAAO,OAAOC,KAAKD,EACvB,CACA,SAASI,EAAWJ,GAChB,MAAO,IAAIC,KAAKD,EACpB,CACA,SAASK,EAASL,GACd,MAAO,OAAOC,KAAKD,EACvB,CACA,SAASM,EAASN,GACd,OAAOE,EAAQF,IAASA,IAASA,EAAKO,aAC1C,EAEA,SAAWxB,GACPA,EAAc,GAAI,KAClBA,EAAe,IAAI,MACnBA,EAAgB,KAAI,OACpBA,EAAmB,QAAI,UACvBA,EAAoB,SAAI,WACxBA,EAAkB,OAAI,SACtBA,EAAkB,OAAI,QACzB,CARD,CAQGA,IAAcA,EAAY,CAAC,IAC9B,IAAIyB,EAAY,IAAIC,IAAI,CACpB,CAAC,KAAM,CAAEC,KAAM3B,EAAU4B,MACzB,CAAC,KAAM,CAAED,KAAM3B,EAAU6B,KACzB,CAAC,IAAK,CAAEF,KAAM3B,EAAU8B,OACxB,CAAC,IAAK,CAAEH,KAAM3B,EAAU+B,aAgG5B,IAAIC,EAAU,EACd,SAASC,IAIL,SAAU,GAHAC,KAAKC,MACI9B,KAAK+B,MAAsB,IAAhB/B,KAAKE,WACtByB,GAAW,KACoBK,SAAS,GACzD,CACA,IAAIC,EAAc,SAAUC,GACxB,MAAuB,kBAAZA,GACA,IAAIC,aAAcC,OAAOF,GAGzBA,CAEf,EACIG,EAAa,SAAUH,GACvB,MAAuB,kBAAZA,EACAA,GAGA,IAAII,aAAcC,OAAOL,EAExC,EACIM,EAAuB,SAAUC,GACjC,OAAOpC,OAAOqC,QAAQD,GAAOE,QAAO,SAAUC,EAAKC,GAC/C,IAAIC,EAAMD,EAAG,GAAIE,EAAQF,EAAG,GAE5B,OADAD,EAAIE,GAAOb,EAAYc,EAAMC,MACtBJ,CACX,GAAG,CAAC,EACR,EAIIK,EAA6B,SAAUC,GACvC,IAAIC,EAAU,CAAC,EAEXC,EAAe,CAAC,MAAO,SAC3B,IACID,EAAUE,KAAKC,MAAMJ,GAAaC,OACtC,CACA,MAAOI,GACH,MAAMC,EAAAA,EAAAA,GAAY,sCAAwCD,EAAEnD,QAChE,EACAqD,EAAAA,EAAAA,IAAUN,EAAS,iFAyBnB,IAxBA,IAAIO,EAAU,SAAUC,GACpB,GAAIP,EAAaO,KAAUR,EAAS,CAChC,IACIS,EAAYT,EADHC,EAAaO,IAEtBE,EAAQ,CAAC,EACTC,EAAY,GACZC,EAAS,GAeb,OA/JZ,SAAkBC,GACd,IAAIC,EAAU,EACVC,EAAS,GACb,SAASC,IAEL,IADA,IAAIpB,EAAQ,GACLpC,EAAUqD,EAAMC,KAAaA,EAAUD,EAAMI,QAChDrB,GAASiB,EAAMC,GACfA,IAEJ,MAAO,CAAE3C,KAAM3B,EAAU0E,QAAStB,MAAOA,EAC7C,CACA,SAASuB,IAEL,IADA,IAAIvB,EAAQ,GACLhC,EAAWiD,EAAMC,KAAaA,EAAUD,EAAMI,QACjDrB,GAASiB,EAAMC,GACfA,IAEJ,OAAO7C,EAAUmD,IAAIxB,EACzB,CACA,SAASyB,IAEL,IADA,IAAIzB,EAAQ,IACJ/B,EAAWgD,EAAMC,KAAanD,EAAQkD,EAAMC,MAChDA,EAAUD,EAAMI,QAChBrB,GAASiB,EAAMC,GACfA,IAEJ,MAAO,CAAE3C,KAAM3B,EAAU+B,SAAUqB,MAAOA,EAC9C,CACA,SAAS0B,IACL,IAAIC,EAAiBV,EAAMC,GACvBlB,EAAQiB,EAAMC,GAElB,IADAA,IACOD,EAAMC,KAAaS,GAAkBT,EAAUD,EAAMI,QACxDrB,GAASiB,EAAMC,GACfA,IAIJ,OAFAlB,GAASiB,EAAMC,GACfA,IACO,CAAE3C,KAAM3B,EAAUgF,OAAQ5B,MAAOA,EAC5C,CACA,SAAS6B,IAmBL,IAlBA,IAAI7B,EAAQ,CAAC,EACT8B,EAAiB,WAGjB,IAFA,IAAI/B,EAAM,GACNgC,EAAO,GACe,MAAnBd,EAAMC,IAAoBA,EAAUD,EAAMI,QAC7CtB,GAAOkB,EAAMC,GACbA,IAMJ,IAHuB,MAAnBD,EAAMC,IACNA,IAEsB,MAAnBD,EAAMC,IAAoBA,EAAUD,EAAMI,QAC7CU,GAAQd,EAAMC,GACdA,IAEJlB,EAAMD,GAAOgC,CACjB,EACO5D,EAAS8C,EAAMC,KAAaA,EAAUD,EAAMI,QAC/CS,IACAZ,IAEJ,MAAO,CAAE3C,KAAM3B,EAAUoF,OAAQhC,MAAOA,EAC5C,CACA,KAAOkB,EAAUD,EAAMI,QAAQ,CAC3B,IAAIY,EAAchB,EAAMC,GACxB,GAjGG,KAAKpD,KAiGSmE,GACbf,SAGJ,QAAQ,GACJ,KAAK/C,EAAS8D,GACVd,EAAOe,KAAKL,KACZ,MACJ,KAAKjE,EAAUqE,GACXd,EAAOe,KAAKd,KACZ,MACJ,KAAKpD,EAAWiE,GACZd,EAAOe,KAAKX,KACZ,MACJ,KAAKtD,EAAWgE,GACZd,EAAOe,KAAKT,KACZ,MACJ,KAAKvD,EAAS+D,GACVd,EAAOe,KAAKR,KACZ,MACJ,QACI,MAAM,IAAIpF,MAAM,sBAAwB2F,GAEpD,CACA,OAAOd,CACX,CAqDYgB,CAAStB,GAAWrD,SAAQ,SAAU4E,GAClC,IAAIC,EAAmC,KAAdtB,EACrBqB,EAAK7D,OAAS3B,EAAUoF,SACxBlB,EAAQsB,EAAKpC,OAEboC,EAAK7D,OAAS3B,EAAU0E,SAAWe,IACnCtB,EAAYqB,EAAKpC,QAEjBoC,EAAK7D,OAAS3B,EAAU+B,WACtB0D,GAAsBD,EAAK7D,OAAS3B,EAAU0E,UAChDN,EAAOkB,KAAKE,EAAKpC,MAGzB,IACO,CAAEA,MAAO,CAACe,EAAWC,EAAQ,CAAEsB,IAAKxB,IAC/C,CACJ,EACSF,EAAQ,EAAGA,EAAQP,EAAagB,OAAQT,IAAS,CACtD,IAAI2B,EAAU5B,EAAQC,GACtB,GAAuB,kBAAZ2B,EACP,OAAOA,EAAQvC,KACvB,CACA,MAAMS,EAAAA,EAAAA,GAAY,gFACtB,EACI+B,EAAsB,SAAUC,GAChC,MAAqB,kBAAVA,EACAA,EACU,kBAAVA,GAAsB,YAAaA,EACnCA,EAAMpF,SAEVoD,EAAAA,EAAAA,GAAY,+GACvB,C,+MCvPe,SAASiC,EAA2BC,EAAKC,GACtD,GAAIA,EAAkBC,IAAIF,GACxB,MAAM,IAAIG,UAAU,iEAExB,C,cCJe,SAASC,EAAuBC,EAAUC,EAAYC,GACnE,IAAKD,EAAWJ,IAAIG,GAClB,MAAM,IAAIF,UAAU,kDAEtB,OAAOI,CACT,CCLe,SAASC,EAA6BH,EAAUI,EAAYC,GACzE,IAAKD,EAAWP,IAAIG,GAClB,MAAM,IAAIF,UAAU,gBAAkBO,EAAS,kCAEjD,OAAOD,EAAW5B,IAAIwB,EACxB,CCHe,SAASM,EAAsBN,EAAUI,GAEtD,OCJa,SAAkCJ,EAAUO,GACzD,OAAIA,EAAW/B,IACN+B,EAAW/B,IAAIgC,KAAKR,GAEtBO,EAAWvD,KACpB,CDDS,CAAwBgD,EADd,EAA4BA,EAAUI,EAAY,OAErE,CEHe,SAASK,EAAsBT,EAAUI,EAAYpD,GAGlE,OCLa,SAAkCgD,EAAUO,EAAYvD,GACrE,GAAIuD,EAAWG,IACbH,EAAWG,IAAIF,KAAKR,EAAUhD,OACzB,CACL,IAAKuD,EAAWI,SACd,MAAM,IAAIb,UAAU,4CAEtBS,EAAWvD,MAAQA,CACrB,CACF,CDLE,CAAwBgD,EADP,EAA4BA,EAAUI,EAAY,OACrBpD,GACvCA,CACT,C,cENI4D,EAAWtG,OAAOuG,OAClBC,EAAYxG,OAAOyG,eACnBC,EAAmB1G,OAAO2G,yBAC1BC,EAAoB5G,OAAO6G,oBAC3BC,EAAe9G,OAAO+G,eACtBC,EAAehH,OAAOtB,UAAUuI,eAEhCC,EAAa,SAACC,EAAIC,GAAG,OAAK,WAC5B,OAAOA,IAAO,EAAID,EAAGP,EAAkBO,GAAI,MAAMC,EAAM,CAAEC,QAAS,CAAC,IAAKA,QAASD,GAAMA,EAAIC,OAC7F,CAAC,EASGC,EAAU,SAACF,EAAKG,EAAYC,GAAM,OAAMA,EAAgB,MAAPJ,EAAcd,EAASQ,EAAaM,IAAQ,CAAC,EARhF,SAACK,EAAIC,EAAMC,EAAQC,GACnC,GAAIF,GAAwB,kBAATA,GAAqC,oBAATA,EAAqB,KAC3BG,EAD2BC,GAAAC,EAAAA,EAAAA,GAClDnB,EAAkBc,IAAK,QAAAM,EAAA,WACrC,IADOvF,EAAGoF,EAAAnF,MACLsE,EAAad,KAAKuB,EAAIhF,IAAQA,IAAQkF,GACzCnB,EAAUiB,EAAIhF,EAAK,CAAEyB,IAAK,kBAAMwD,EAAKjF,EAAI,EAAEwF,aAAcL,EAAOlB,EAAiBgB,EAAMjF,KAASmF,EAAKK,YAAa,EAFtH,IAAAH,EAAAI,MAAAL,EAAAC,EAAAK,KAAAC,MAAAJ,GAEuH,OAAAK,GAAAP,EAAA5E,EAAAmF,EAAA,SAAAP,EAAAQ,GAAA,CACzH,CACA,OAAOb,CACT,CACqGc,EACnGhB,GAAeH,GAAQA,EAAIoB,WAA8EhB,EAAjEhB,EAAUgB,EAAQ,UAAW,CAAE9E,MAAO0E,EAAKa,YAAY,IAC/Fb,EACD,EACGqB,EAAgB,SAACpD,EAAK5C,EAAKC,GAE7B,OAlBoB,SAAC2C,EAAK5C,EAAKC,GAAUD,KAAO4C,EAAMmB,EAAUnB,EAAK5C,EAAK,CAAEwF,YAAY,EAAMS,cAAc,EAAMrC,UAAU,EAAM3D,MAAAA,IAAW2C,EAAI5C,GAAOC,CAAK,CAiB7JiG,CAAgBtD,EAAoB,kBAAR5C,EAAmBA,EAAM,GAAKA,EAAKC,GACxDA,CACT,EACIkG,EAAgB,SAACvD,EAAKwD,EAAQC,GAChC,IAAKD,EAAOtD,IAAIF,GACd,MAAMG,UAAU,UAAYsD,EAChC,EACIC,EAAe,SAAC1D,EAAKwD,EAAQG,GAE/B,OADAJ,EAAcvD,EAAKwD,EAAQ,2BACpBG,EAASA,EAAO9C,KAAKb,GAAOwD,EAAO3E,IAAImB,EAChD,EACI4D,EAAe,SAAC5D,EAAKwD,EAAQnG,GAC/B,GAAImG,EAAOtD,IAAIF,GACb,MAAMG,UAAU,qDAClBqD,aAAkBK,QAAUL,EAAOM,IAAI9D,GAAOwD,EAAOzC,IAAIf,EAAK3C,EAChE,EACI0G,EAAe,SAAC/D,EAAKwD,EAAQnG,EAAO2G,GAGtC,OAFAT,EAAcvD,EAAKwD,EAAQ,0BAC3BQ,EAASA,EAAOnD,KAAKb,EAAK3C,GAASmG,EAAOzC,IAAIf,EAAK3C,GAC5CA,CACT,EACI4G,EAAkB,SAACjE,EAAKwD,EAAQU,GAElC,OADAX,EAAcvD,EAAKwD,EAAQ,yBACpBU,CACT,EAGIC,EAActC,EAAW,CAC3B,mEAAkE,SAACG,EAASoC,GAC1EA,EAAOpC,QAAU,SAAaqC,EAAKC,GACjC,IAAIzB,EAAI,YAAcwB,EACtB,OAAOxB,EAAE0B,OAAO1B,EAAEnE,OAAS4F,EAC7B,CACF,IAIEE,EAA8B3C,EAAW,CAC3C,mFAAkF,SAACG,EAASoC,GAC1F,IAAIK,EAAMN,IACNxE,EAAwB,kBAAX+E,OAAsBA,OAASC,KAC5CC,EAAcjK,OAAOkK,KAAKlF,GAAKjB,OAE/BoG,EAAWL,IADOM,UAAUC,UAAYD,UAAUC,UAAUtG,OAAS,GACnCqG,UAAUE,UAAUvG,QAAQpC,SAAS,IAAMsI,EAAYtI,SAAS,IAAK,GAC3G8H,EAAOpC,QAAU,WACf,OAAO8C,CACT,CACF,IAIEI,EAAiCrD,EAAW,CAC9C,sFAAqF,SAACG,EAASoC,GAC7F,IAAIe,EAUAC,EATAC,EAA2B,qBAAXX,SAA2BA,OAAOW,QAAUX,OAAOY,WAA6B,qBAATX,MAAwBA,KAAKU,OACpHA,GACFD,EAAM9K,KAAKiL,IAAI,EAAG,IAAM,EACxBJ,EAAiB,WACf,OAAO7K,KAAKkL,IAAIH,EAAOI,gBAAgB,IAAIC,YAAY,IAAI,GAAKN,EAClE,GAEAD,EAAiB7K,KAAKE,OAGxB4J,EAAOpC,QAAUmD,CACnB,IAIEQ,EAAe9D,EAAW,CAC5B,iEAAgE,SAACG,EAASoC,GACxE,IAAIwB,EAAcpB,IACdC,EAAMN,IACNgB,EAAiBD,IACjBW,EAAI,EACJC,EAAY,EACZC,EAAO,GACPC,EAAiB1L,KAAKiL,IAAIQ,EAAMD,GACpC,SAASG,IACP,OAAOxB,GAAKU,IAAmBa,GAAkB,GAAG1J,SAASyJ,GAAOD,EACtE,CACA,SAASI,IAGP,OAFAL,EAAIA,EAAIG,EAAiBH,EAAI,IAC7BA,EACW,CACb,CACA,SAASM,IAEP,MADa,KAAiB,IAAIhK,MAAOiK,UAAU9J,SAASyJ,GAAiBtB,EAAIyB,IAAc5J,SAASyJ,GAAOD,GAAoBF,KAAwBK,IAAgBA,IAE7K,CACAE,EAAME,KAAO,WACX,IAAIC,GAAO,IAAInK,MAAOiK,UAAU9J,SAAS,IAAKL,EAAUiK,IAAc5J,SAAS,IAAIiK,OAAO,GAAIC,EAAQZ,IAAcW,MAAM,EAAG,GAAKX,IAAcW,OAAO,GAAI/L,EAASyL,IAAcM,OAAO,GACzL,OAAOD,EAAKC,OAAO,GAAKtK,EAAUuK,EAAQhM,CAC5C,EACA2L,EAAMM,OAAS,SAAgBC,GAC7B,MAA6B,kBAAlBA,KAEPA,EAAcC,WAAW,IAG/B,EACAR,EAAMS,OAAS,SAAgBF,GAC7B,GAA6B,kBAAlBA,EACT,OAAO,EACT,IAAIG,EAAeH,EAAchI,OACjC,OAAImI,GAAgB,GAAKA,GAAgB,EAG3C,EACAV,EAAMP,YAAcA,EACpBxB,EAAOpC,QAAUmE,CACnB,IAIEW,EAAiCjF,EAAW,CAC9C,wIAAuI,SAACG,GAEtIrH,OAAOyG,eAAeY,EAAS,aAAc,CAAE3E,OAAO,IACtD2E,EAAQ+E,4BAAyB,EA2BjC/E,EAAQ+E,uBA1BR,WAwBE,OAvBiB,SAAXC,EAAYC,EAASC,GACzBF,EAASG,MAAQ,UACjBH,EAASC,QAAU,SAACG,GAClB,GAAuB,YAAnBJ,EAASG,MAAb,CAGAH,EAASK,OAASD,EAKlB,OAAOH,EAAQG,aAAgBE,QAAUF,EAAOE,QAAQL,QAAQG,GAAMG,MAJlD,SAAClK,GAEnB,OADA2J,EAASG,MAAQ,YACV9J,CACT,IALA,CAOF,EACA2J,EAASE,OAAS,SAACM,GACjB,GAAuB,YAAnBR,EAASG,MAMb,OAHAM,gBAAe,WACbT,EAASG,MAAQ,UACnB,IACOD,EAAOF,EAASU,gBAAkBF,EAC3C,CACF,CAEF,CAEF,IAIEG,EAA0B9F,EAAW,CACvC,iIAAgI,SAACG,GAClH,IAAA4F,EAAAC,EACblN,OAAOyG,eAAeY,EAAS,aAAc,CAAE3E,OAAO,IACtD2E,EAAQ8F,qBAAkB,EAC1B,IAAIC,EAA2BjB,IAC3BkB,GAAgBJ,EAAA,IAAAK,QAAAJ,EAAA,IAAAhE,QAAA,SAAAqE,IAAAC,EAAAA,EAAAA,GAAAH,EAAAE,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAL,GAIlB,SAAAA,IAA6B,IAAAjN,EAAjBiM,EAAQsB,UAAA5J,OAAA,QAAA6J,IAAAD,UAAA,GAAAA,UAAA,GAAG,MAAIE,EAAAA,EAAAA,GAAA,KAAAR,GACzB,ICxL4ChI,EAAKM,EDwL3CmI,GAAmB,EAAIV,EAAyBhB,0BAOlB,OANpChM,EAAAqN,EAAAvH,KAAA,MAAM,SAAC6H,EAAiBC,GACtBF,EAAiBC,EAAiBC,GAC1B,OAAR3B,QAAQ,IAARA,GAAAA,EAAWyB,EAAiBxB,QAASwB,EAAiBvB,OACxD,IC3LN,EADkDlH,GD4LzC4I,EAAAA,EAAAA,GAAA7N,GC5L8CuF,ED4L9CuH,GC1LTvH,EAAWwD,IAAI9D,GCFF,SAAoCA,EAAKS,EAAYpD,GAClE,EAA0B2C,EAAKS,GAC/BA,EAAWM,IAAIf,EAAK3C,EACtB,CFyLWwL,EAAAD,EAAAA,EAAAA,GAAA7N,GAAA6M,EAAA,CAAA5G,UAAA,EAAA3D,WAAA,KAAAyL,EAAAA,EAAAA,IAAAF,EAAAA,EAAAA,GAAA7N,GAAA,mBAAA+N,EAAAA,EAAAA,IAAAF,EAAAA,EAAAA,GAAA7N,GAAA,iBACH+F,GAAA8H,EAAAA,EAAAA,GAAA7N,GAAA6M,EAAiBa,GACjB1N,EAAKkM,QAAUtG,GAAAiI,EAAAA,EAAAA,GAAA7N,GAAA6M,GAAeX,QAC9BlM,EAAKmM,OAASvG,GAAAiI,EAAAA,EAAAA,GAAA7N,GAAA6M,GAAeV,OAAOnM,CACtC,CAeC,OAfAgO,EAAAA,EAAAA,GAAAf,EAAA,EAAA5K,IAAA,QAAAyB,IACD,WACE,OAAO8B,EAAAxH,KAAIyO,GAAWT,KACxB,GAAC,CAAA/J,IAAA,kBAAAyB,IACD,WACE,OAAO8B,EAAAxH,KAAIyO,GAAWF,eACxB,GAAC,CAAAtK,IAAA,OAAAC,MACD,SAAK2L,EAAaC,GAChB,OAAA7I,EAAOjH,KAAI0O,EAAAqB,GAAArI,KAAJ1H,MAAIgQ,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAApB,EAAA3O,WAAA,aAAAwH,KAAA,KAAsBmI,EAAaC,GAChD,GAAC,CAAA7L,IAAA,QAAAC,MACD,SAAM4L,GACJ,OAAA7I,EAAOjH,KAAI0O,EAAAqB,GAAArI,KAAJ1H,MAAIgQ,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAApB,EAAA3O,WAAA,cAAAwH,KAAA,KAAuBoI,GACpC,GAAC,CAAA7L,IAAA,UAAAC,MACD,SAAQgM,GACN,OAAAjJ,EAAOjH,KAAI0O,EAAAqB,GAAArI,KAAJ1H,MAAIgQ,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAApB,EAAA3O,WAAA,gBAAAwH,KAAA,KAAyBwI,GACtC,KAACrB,CAAA,CA5BiB,EA4BjBsB,EAAAA,EAAAA,GA5BkChC,WAmCnC,SAAA4B,EANUK,GACR,OAAO5O,OAAO6O,iBAAiBD,EAAS,CACtCtC,QAAS,CAAE5D,cAAc,EAAMhG,MAAOlE,KAAK8N,SAC3CC,OAAQ,CAAE7D,cAAc,EAAMhG,MAAOlE,KAAK+N,SAE9C,CAEFlF,EAAQ8F,gBAAkBE,CAC5B,IAIEyB,EAAgB5H,EAAW,CAC7B,uHAAsH,SAACG,GAErH,IAAI0H,EAAkB1H,GAAWA,EAAQ0H,kBAAoB/O,OAAOuG,OAAS,SAASyI,EAAGC,EAAGC,EAAGC,QAClF,IAAPA,IACFA,EAAKD,GACP,IAAItH,EAAO5H,OAAO2G,yBAAyBsI,EAAGC,GACzCtH,KAAS,QAASA,GAAQqH,EAAEzG,WAAaZ,EAAKvB,UAAYuB,EAAKc,gBAClEd,EAAO,CAAEK,YAAY,EAAM/D,IAAK,WAC9B,OAAO+K,EAAEC,EACX,IAEFlP,OAAOyG,eAAeuI,EAAGG,EAAIvH,EAC/B,EAAI,SAASoH,EAAGC,EAAGC,EAAGC,QACT,IAAPA,IACFA,EAAKD,GACPF,EAAEG,GAAMF,EAAEC,EACZ,GACIE,EAAe/H,GAAWA,EAAQ+H,cAAgB,SAASH,EAAGI,GAChE,IAAK,IAAIC,KAAKL,EACF,YAANK,GAAoBtP,OAAOtB,UAAUuI,eAAef,KAAKmJ,EAAUC,IACrEP,EAAgBM,EAAUJ,EAAGK,EACnC,EACAtP,OAAOyG,eAAeY,EAAS,aAAc,CAAE3E,OAAO,IACtD0M,EAAajD,IAAkC9E,GAC/C+H,EAAapC,IAA2B3F,EAC1C,IAIEkI,EAA0BrI,EAAW,CACvC,+GAA8G,SAACG,GAE7GrH,OAAOyG,eAAeY,EAAS,aAAc,CAAE3E,OAAO,IACtD2E,EAAQmI,qBAAkB,EAC1B,IAAIA,EAAe,SAAAC,IAAAjC,EAAAA,EAAAA,GAAAgC,EAAAC,GAAA,IAAAC,GAAAhC,EAAAA,EAAAA,GAAA8B,GAIjB,SAAAA,EAAYG,EAAS1O,EAAM2O,GAAO,IAAAC,EAKU,OALVhC,EAAAA,EAAAA,GAAA,KAAA2B,GAChCK,EAAAH,EAAAxJ,KAAA,oDAAA4J,OAAqDF,EAAK,KAAAE,OAAI7O,EAAKU,WAAU,uEAAqEwM,EAAAA,EAAAA,IAAAF,EAAAA,EAAAA,GAAA4B,GAAA,mBAAA1B,EAAAA,EAAAA,IAAAF,EAAAA,EAAAA,GAAA4B,GAAA,gBAAA1B,EAAAA,EAAAA,IAAAF,EAAAA,EAAAA,GAAA4B,GAAA,gBAClJA,EAAKF,QAAUA,EACfE,EAAK5O,KAAOA,EACZ4O,EAAKD,MAAQA,EACbC,EAAKE,KAAO,8BAA8BF,CAC5C,CAAC,OAAAzB,EAAAA,EAAAA,GAAAoB,EAAA,CAVgB,EAUhBb,EAAAA,EAAAA,GAViC3P,QAYpCqI,EAAQmI,gBAAkBA,CAC5B,IAIEQ,EAAkB9I,EAAW,CAC/B,uGAAsG,SAACG,GAErGrH,OAAOyG,eAAeY,EAAS,aAAc,CAAE3E,OAAO,IACtD2E,EAAQ4I,aAAU,EAClB,IACIC,EAASC,EAAeC,EAAqCC,EAAeC,EAAiBC,EAAiBC,EAAmBC,EAAmBC,EAAqBC,EAAeC,EADxLC,EAAoBtB,IAEpBuB,EAAQ,WACV,SAAAA,KAAcjD,EAAAA,EAAAA,GAAA,KAAAiD,GACZ7H,EAAazK,KAAM6R,GACnBpH,EAAazK,KAAM+R,GACnBtH,EAAazK,KAAMiS,GACnBxH,EAAazK,KAAMmS,GACnB1H,EAAazK,KAAM0R,OAAS,GAC5BjH,EAAazK,KAAM2R,OAAe,GAClClH,EAAazK,KAAM4R,OAAqC,GACxDhH,EAAa5K,KAAM0R,EAAyB,IAAIlP,KAChDoI,EAAa5K,KAAM2R,EAAeW,EAASC,qBAC3C3H,EAAa5K,KAAM4R,GAAqC,EAC1D,CAGC,OAHAhC,EAAAA,EAAAA,GAAA0C,EAAA,EAAArO,IAAA,kBAAAC,MAID,SAAgBsO,GAEd,OADA5H,EAAa5K,KAAM2R,EAAea,GAC3BxS,IACT,GAAC,CAAAiE,IAAA,kBAAAC,MACD,WACE,OAAOqG,EAAavK,KAAM2R,EAC5B,GAAC,CAAA1N,IAAA,aAAAC,MACD,WACE,OAAOuO,MAAMvJ,KAAKqB,EAAavK,KAAM0R,GAAShG,OAChD,GAAC,CAAAzH,IAAA,OAAAC,MACD,SAAKwO,GAAoB,QAAAC,EAAA,KAAAC,EAAAzD,UAAA5J,OAAN0I,EAAI,IAAAwE,MAAAG,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ5E,EAAI4E,EAAA,GAAA1D,UAAA0D,GACrB,IAAM7R,EAAY8J,EAAgB9K,KAAM6R,EAAeC,GAAiBpK,KAAK1H,KAAM0S,GAInF,OAHA1R,EAAUU,SAAQ,SAACC,GACjBA,EAASmR,MAAMH,EAAM1E,EACvB,IACOjN,EAAUuE,OAAS,CAC5B,GAAC,CAAAtB,IAAA,cAAAC,MACD,SAAYwO,EAAW/Q,GACrBmJ,EAAgB9K,KAAMmS,EAAeC,GAAiB1K,KAAK1H,KAAM,cAAe0S,EAAW/Q,GAC3F,IAAMoR,EAAgBjI,EAAgB9K,KAAM6R,EAAeC,GAAiBpK,KAAK1H,KAAM0S,GAAWpB,OAAO3P,GAEzG,GADA4I,EAAavK,KAAM0R,GAAS9J,IAAI8K,EAAWK,GACvCxI,EAAavK,KAAM2R,GAAiB,GAAK3R,KAAKgT,cAAcN,GAAanI,EAAavK,KAAM2R,KAAmBpH,EAAavK,KAAM4R,GAAsC,CAC1KhH,EAAa5K,KAAM4R,GAAqC,GACxD,IAAMqB,EAAoB,IAAIZ,EAAkBrB,gBAAgBhR,KAAM0S,EAAW1S,KAAKgT,cAAcN,IACpGQ,QAAQC,KAAKF,EACf,CACA,OAAOjT,IACT,GAAC,CAAAiE,IAAA,KAAAC,MACD,SAAGwO,EAAW/Q,GACZ,OAAO3B,KAAKoT,YAAYV,EAAW/Q,EACrC,GAAC,CAAAsC,IAAA,OAAAC,MACD,SAAKwO,EAAW/Q,GACd,OAAO3B,KAAKoT,YAAYV,EAAW5H,EAAgB9K,KAAMiS,EAAmBC,GAAqBxK,KAAK1H,KAAM0S,EAAW/Q,GACzH,GAAC,CAAAsC,IAAA,kBAAAC,MACD,SAAgBwO,EAAW/Q,GACzB,IAAMX,EAAY8J,EAAgB9K,KAAM6R,EAAeC,GAAiBpK,KAAK1H,KAAM0S,GACnF,GAAI1R,EAAUuE,OAAS,EAAG,CACxB,IAAMwN,EAAgB,CAACpR,GAAU2P,OAAOtQ,GACxCuJ,EAAavK,KAAM0R,GAAS9J,IAAI8K,EAAWK,EAC7C,MACExI,EAAavK,KAAM0R,GAAS9J,IAAI8K,EAAW1R,EAAUsQ,OAAO3P,IAE9D,OAAO3B,IACT,GAAC,CAAAiE,IAAA,sBAAAC,MACD,SAAoBwO,EAAW/Q,GAC7B,OAAO3B,KAAKqT,gBAAgBX,EAAW5H,EAAgB9K,KAAMiS,EAAmBC,GAAqBxK,KAAK1H,KAAM0S,EAAW/Q,GAC7H,GAAC,CAAAsC,IAAA,iBAAAC,MACD,SAAewO,EAAW/Q,GACxB,IAAMX,EAAY8J,EAAgB9K,KAAM6R,EAAeC,GAAiBpK,KAAK1H,KAAM0S,GAMnF,OALI1R,EAAUuE,OAAS,IACrBuF,EAAgB9K,KAAM+R,EAAiBC,GAAmBtK,KAAK1H,KAAMgB,EAAWW,GAChF4I,EAAavK,KAAM0R,GAAS9J,IAAI8K,EAAW1R,GAC3C8J,EAAgB9K,KAAMmS,EAAeC,GAAiB1K,KAAK1H,KAAM,iBAAkB0S,EAAW/Q,IAEzF3B,IACT,GAAC,CAAAiE,IAAA,MAAAC,MACD,SAAIwO,EAAW/Q,GACb,OAAO3B,KAAKsT,eAAeZ,EAAW/Q,EACxC,GAAC,CAAAsC,IAAA,qBAAAC,MACD,SAAmBwO,GAMjB,OALIA,EACFnI,EAAavK,KAAM0R,GAAS6B,OAAOb,GAEnCnI,EAAavK,KAAM0R,GAAS8B,QAEvBxT,IACT,GAAC,CAAAiE,IAAA,YAAAC,MACD,SAAUwO,GACR,OAAOD,MAAMvJ,KAAK4B,EAAgB9K,KAAM6R,EAAeC,GAAiBpK,KAAK1H,KAAM0S,GACrF,GAAC,CAAAzO,IAAA,gBAAAC,MACD,SAAcwO,GACZ,OAAO5H,EAAgB9K,KAAM6R,EAAeC,GAAiBpK,KAAK1H,KAAM0S,GAAWnN,MACrF,GAAC,CAAAtB,IAAA,eAAAC,MACD,SAAawO,GACX,OAAO1S,KAAKgB,UAAU0R,EACxB,IAAC,EAAAzO,IAAA,gBAAAC,MA9ED,SAAqBiN,EAASuB,GAC5B,OAAOvB,EAAQ6B,cAAcN,EAC/B,KAACJ,CAAA,CAfS,GA6FRmB,EAAWnB,EACfZ,EAAU,IAAI5C,QACd6C,EAAgB,IAAI7C,QACpB8C,EAAsC,IAAI9C,QAC1C+C,EAAgB,IAAInH,QACpBoH,EAAkB,SAASY,GACzB,OAAOnI,EAAavK,KAAM0R,GAAShM,IAAIgN,IAAc,EACvD,EACAX,EAAkB,IAAIrH,QACtBsH,EAAoB,SAAShR,EAAWW,GACtC,IAAMmD,EAAQ9D,EAAU0S,QAAQ/R,GAIhC,OAHImD,GAAS,GACX9D,EAAU2S,OAAO7O,EAAO,GAEnB,EACT,EACAmN,EAAoB,IAAIvH,QACxBwH,EAAsB,SAASQ,EAAW/Q,GAAU,IAAAiS,EAAA,KAKlD,OAJqB,SAAfC,IACJD,EAAKN,eAAeZ,EAAWmB,GAAc,QAAAC,EAAA3E,UAAA5J,OADtB0I,EAAI,IAAAwE,MAAAqB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ9F,EAAI8F,GAAA5E,UAAA4E,GAE3BpS,EAASmR,MAAMc,EAAM3F,EACvB,CAEF,EACAkE,EAAgB,IAAIzH,QACpB0H,EAAkB,SAAS4B,EAAmBtB,EAAW/Q,GACvD3B,KAAKiU,KAAInB,MAAT9S,KAAI,CACFgU,GAAiB1C,OACd,CAACoB,EAAW/Q,IAEnB,EACAsI,EAAcwJ,EAAU,sBAAuB,IAC/C5K,EAAQ4I,QAAUgC,CACpB,IAIES,EAAcxL,EAAW,CAC3B,qGAAoG,SAACG,GAEnG,IAAI0H,EAAkB1H,GAAWA,EAAQ0H,kBAAoB/O,OAAOuG,OAAS,SAASyI,EAAGC,EAAGC,EAAGC,QAClF,IAAPA,IACFA,EAAKD,GACP,IAAItH,EAAO5H,OAAO2G,yBAAyBsI,EAAGC,GACzCtH,KAAS,QAASA,GAAQqH,EAAEzG,WAAaZ,EAAKvB,UAAYuB,EAAKc,gBAClEd,EAAO,CAAEK,YAAY,EAAM/D,IAAK,WAC9B,OAAO+K,EAAEC,EACX,IAEFlP,OAAOyG,eAAeuI,EAAGG,EAAIvH,EAC/B,EAAI,SAASoH,EAAGC,EAAGC,EAAGC,QACT,IAAPA,IACFA,EAAKD,GACPF,EAAEG,GAAMF,EAAEC,EACZ,GACIE,EAAe/H,GAAWA,EAAQ+H,cAAgB,SAASH,EAAGI,GAChE,IAAK,IAAIC,KAAKL,EACF,YAANK,GAAoBtP,OAAOtB,UAAUuI,eAAef,KAAKmJ,EAAUC,IACrEP,EAAgBM,EAAUJ,EAAGK,EACnC,EACAtP,OAAOyG,eAAeY,EAAS,aAAc,CAAE3E,OAAO,IACtD0M,EAAaY,IAAmB3I,GAChC+H,EAAaG,IAA2BlI,EAC1C,IAIEsL,EAAcrL,EAAQ0D,KAGtB4H,EAAkB,mBAsBtB,SAASC,EAAO9S,GAAyB,QAAA+S,EAAAnF,UAAA5J,OAAbgP,EAAW,IAAA9B,MAAA6B,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAXD,EAAWC,EAAA,GAAArF,UAAAqF,GACrC,GAA2B,IAAvBD,EAAYhP,OACd,OAAOhE,EAET,IAAIkT,EAAkB,EAClBC,EAAmBnT,EAAQoT,QAC7BP,GACA,SAACQ,EAAOC,EAAWC,EAAGC,GACpB,IACM7Q,EA9BZ,SAA6B8Q,EAAYD,GACvC,OAAQA,GACN,IAAK,IACH,OAAOC,EACT,IAAK,IACL,IAAK,IACH,OAAOC,OAAOD,GAChB,IAAK,IACH,OAAOxQ,KAAK0Q,UAAUF,GACxB,IAAK,IACH,GAA0B,kBAAfA,EACT,OAAOA,EAET,IAAMG,EAAO3Q,KAAK0Q,UAAUF,GAC5B,MAAa,OAATG,GAA0B,OAATA,GAAiB,mBAAmBnT,KAAKmT,GACrDH,EAEFG,EAGb,CAUoBC,CADKb,EAAYE,GACeM,GAC9C,OAAKF,EAIED,GAHLH,IACOvQ,EAGX,IAMF,OAJIuQ,EAAkBF,EAAYhP,SAChCmP,GAAoB,IAAJpD,OAAQiD,EAAYnH,MAAMqH,GAAiBY,KAAK,OAElEX,EAAmBA,EAAiBC,QAAQ,UAAW,IAEzD,CAUA,IAAIW,EAAc,SAAAC,IAAAvG,EAAAA,EAAAA,GAAAsG,EAAAC,GAAA,IAAAC,GAAAtG,EAAAA,EAAAA,GAAAoG,GAChB,SAAAA,EAAY/T,GAAyB,IAAAkU,GAAApG,EAAAA,EAAAA,GAAA,KAAAiG,IACnCG,EAAAD,EAAA9N,KAAA,KAAMnG,IACDA,QAAUA,EACfkU,EAAKlE,KAAO,sBAAsB,QAAAmE,EAAAvG,UAAA5J,OAHZgP,EAAW,IAAA9B,MAAAiD,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAXpB,EAAWoB,EAAA,GAAAxG,UAAAwG,GAKX,OADtBF,EAAKlU,QAAU8S,EAAMvB,WAAC,EAAD,CAACvR,GAAO+P,OAAKiD,IAbtC,SAAyB5N,GACvB,GAAKA,EAAMiP,MAAX,CAGA,IAAMC,EAAYlP,EAAMiP,MAAME,MAAM,MACpCD,EAAUlC,OAAO,EANU,GAO3BhN,EAAMiP,MAAQC,EAAUR,KAAK,KAH7B,CAIF,CAOIU,EAAetG,EAAAA,EAAAA,GAAAgG,IAAOA,CACxB,CAAC,OAAA7F,EAAAA,EAAAA,GAAA0F,EAAA,CAPe,EAOfnF,EAAAA,EAAAA,GAPgC3P,QAS/BoE,EAAY,SAACoR,EAAWzU,GAC1B,IAAKyU,EAAW,SAAAC,EAAA9G,UAAA5J,OADsBgP,EAAW,IAAA9B,MAAAwD,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAX3B,EAAW2B,EAAA,GAAA/G,UAAA+G,GAE/C,MAAAC,EAAAA,EAAAA,GAAUb,EAAc,CAAC/T,GAAO+P,OAAKiD,GACvC,CACF,EACA3P,EAAUwR,GAAK,SAACC,EAAkBL,EAAWzU,GAC3C,IAAKyU,EAAW,CACgD,IAA9D,IAAMM,EAAmD,MAAnCD,EAAiBnW,UAAUqR,KAAagF,EAAApH,UAAA5J,OAFTgP,EAAW,IAAA9B,MAAA8D,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAXjC,EAAWiC,EAAA,GAAArH,UAAAqH,GAIhE,MADcF,EAAgB,IAAID,EAAiBhC,EAAO9S,EAASgT,IAAgB8B,EAAiBhC,EAAO9S,EAASgT,GAEtH,CACF,EAGA,IAAIkC,EAA0B3N,EAAQwH,KAGlCoG,EAAOnL,OAAOoL,aAAiC,mBAO/CC,GAAO,aACPC,GAAc,CAChBC,QAJW,aAKXC,SAJY,aAKZC,QAASJ,GACTK,OARS,WAST,iBAAkBL,IAEpB,SAASM,GAAYC,GACnB,OAAO,SAAgB5V,GACrB,GAAa,SAATmV,EAAiB,CAQiC,IARjC,IAAAU,EAQbC,EAAe9V,EAAQoT,QAAQ,UAAW,IAAI2C,EAAAnI,UAAA5J,OATrB0I,EAAI,IAAAwE,MAAA6E,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJtJ,EAAIsJ,EAAA,GAAApI,UAAAoI,IAUnCH,EAAAlE,SAAQsE,MAAK1E,MAAAsE,EAAA,IAAA9F,OAAIuF,GAAYM,IAAM7F,OAAG6F,EAAK,KAAA7F,OAPrC/P,EAAQkW,SAAS,UACZ,GAAPnG,OAlBE,aAkBa,UACb/P,EAAQkW,SAAS,YACZ,GAAPnG,OAnBA,WAmBa,YACR,IAGiDA,OAzBlD,UAyB4D,KAAAA,OAAI+F,IAAY/F,OAAOrD,GAC7F,CACF,CACF,CAGA,IAAIuJ,GAAQN,GAAY,YAgFpBQ,GAAa,WACf,SAAAA,EAAY1O,GAAQ,IAAA2O,EAAA,MAAAtI,EAAAA,EAAAA,GAAA,KAAAqI,IAAA/H,EAAAA,EAAAA,GAAA,wBAAAA,EAAAA,EAAAA,GAAA,wBAAAA,EAAAA,EAAAA,GAAA,6BAAAA,EAAAA,EAAAA,GAAA,oCAClB3P,KAAKgJ,OAASA,EACdhJ,KAAKmR,QAAU,IAAIyG,YACnB5X,KAAK6X,QAAU,IAAIC,eACnB9X,KAAK+X,aAAe/X,KAAK6X,QAAQG,MACjC,IAAMC,EAAuB,IAAIxB,EAAwB9H,gBACnDuJ,EAAoB,SAAC3W,GACC,mBAAtBA,EAAQ0M,KAAKxL,OACf+U,GAAM,sCACNS,EAAqBnK,UAEzB,EACAvC,OAAO4M,iBAAiB,UAAWD,GACnCD,EAAqB7J,MAAK,WACxB7C,OAAO6M,oBAAoB,UAAWF,EACxC,IACAlY,KAAKiY,qBAAuBA,EAC5BjY,KAAK+X,aAAaM,UAAY,SAACC,GAC7B,IAAMrK,EAAOqK,EAAIrK,KACA,MAAbA,EAAKxL,OACP+U,GAAM,2CAA4CvJ,EAAKxL,KAAMwL,EAAKsK,SAClEZ,EAAKxG,QAAQqH,cAAc,IAAIC,aAAaxK,EAAKxL,KAAM,CAAEwL,KAAMA,EAAKsK,WAExE,CACF,CAuEC,OAvEA3I,EAAAA,EAAAA,GAAA8H,EAAA,EAAAzT,IAAA,YAAAC,MAAA,eAAAwU,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAKD,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAJ,EAAAA,EAAAA,KAAAK,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACwE,OAAhEL,EAAmB,IAAItC,EAAwB9H,gBAAiBuK,EAAAE,KAAA,EAChEpZ,KAAKiY,qBAAoB,OAexB,OAdPT,GAAM,uCACNxX,KAAKgJ,OAAOqQ,YACV,CACE5W,KAAM,sBAER,IACA,CAACzC,KAAK6X,QAAQyB,QAEhBtZ,KAAKuZ,GAAG,2BAA2B,WACjCR,EAAiBjL,UACjB0L,aAAaR,EACf,IACMA,EAAmBS,YAAW,WAClCV,EAAiBhL,OAAO,IAAIvN,MAAM,oCACpC,GAAG,KAAI0Y,EAAAQ,OAAA,SACAX,GAAgB,wBAAAG,EAAAS,OAAA,GAAAb,EAAA,UACxB,yBAAAJ,EAAA5F,MAAA,KAAA3D,UAAA,EAxBA,IAwBA,CAAAlL,IAAA,KAAAC,MACD,SAAG0V,EAAOjY,EAAU5B,GAClByX,GAAM,sCAAuCoC,GAC7C5Z,KAAKmR,QAAQgH,iBACXyB,GACA,SAACrY,GACKA,aAAmBkX,cACrB9W,EAASJ,EAEb,GACAxB,EAEJ,GAAC,CAAAkE,IAAA,MAAAC,MACD,SAAI0V,EAAOjY,EAAU5B,GACnBC,KAAKmR,QAAQiH,oBAAoBwB,EAAOjY,EAAU5B,EACpD,GAAC,CAAAkE,IAAA,OAAAC,MAAA,eAAA2V,GAAAlB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAiB,EAAWF,GAAK,IAAAG,EAAAC,EAAAzB,EAAA0B,EAAAC,EAAAC,EAAA,KAAAC,EAAAjL,UAAA,OAAAyJ,EAAAA,EAAAA,KAAAK,MAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,OA0B8C,OAzBtDW,EAAmB,IAAItD,EAAwB9H,gBAC/CqL,GAAc,EAAI7F,EAAYmG,WAEpC9C,GAAM,mCAAoCoC,EAAOI,EAD3CzB,GAAU6B,EAAA7U,QAAA,OAAA6J,EAAAgL,EAAA,KAAW,CAAC,GAE5Bpa,KAAK+X,aAAasB,YAAY,CAAE5W,KAAMmX,EAAOrB,QAAS,CAAEyB,YAAAA,EAAazB,QAAAA,KACrEf,GAAM,uDAAwDoC,EAAOI,GAC/DC,EAAsB,SAACM,GAC3B,IAAcC,EAAUD,EAAhBtM,KACR,GAAIuM,EAAMR,cAAgBA,EAAa,CACrC,IAAMS,EAAkBD,EAAMC,iBAAmB,CAAC,EAClDjD,GAAM,gDAAiDoC,EAAOI,GAC9DD,EAAiBjM,SAAO4M,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACrBD,GAAe,IAClBT,YAAaQ,EAAMR,cAEvB,CACF,EACME,EAAwB,SAACS,GAC7B,IAAcH,EAAUG,EAAhB1M,KACJuM,EAAMR,cAAgBA,IACxBxC,GAAM,gDAAiDoC,EAAOI,GAC9DD,EAAiBhM,OAAOyM,EAAM7T,OAElC,EACA3G,KAAKuZ,GAAG,0BAA2BU,GACnCja,KAAKuZ,GAAG,4BAA6BW,GAAuBG,EAAAX,OAAA,SACrDK,EAAiBa,SAAQ,WAC9BT,EAAKhJ,QAAQiH,oBAAoB,0BAA2B6B,GAC5DE,EAAKhJ,QAAQiH,oBAAoB,4BAA6B8B,EAChE,KAAE,yBAAAG,EAAAV,OAAA,GAAAG,EAAA,UACH,gBAAAe,GAAA,OAAAhB,EAAA/G,MAAA,KAAA3D,UAAA,EAhCA,MAgCAuI,CAAA,CAhGc,GAoGboD,GAA2BhS,EAAQwH,KAGnCyK,GAAejS,EAAQ0D,KACvBwO,GAAa,WACf,SAAAA,EAAYnD,IAASxI,EAAAA,EAAAA,GAAA,KAAA2L,GACnBhb,KAAK6X,QAAUA,CACjB,CAqEC,OArEAjI,EAAAA,EAAAA,GAAAoL,EAAA,EAAA/W,IAAA,OAAAC,MAAA,eAAA+W,GAAAtC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAqC,EAAWtX,GAAK,OAAAgV,EAAAA,EAAAA,KAAAK,MAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EACRpZ,KAAK6X,QAAQuD,KAAK,UAAW,CAAExX,MAAAA,IAAQ,wBAAAuX,EAAAxB,OAAA,GAAAuB,EAAA,UAC9C,gBAAAG,GAAA,OAAAJ,EAAAnI,MAAA,KAAA3D,UAAA,EAHA,IAGA,CAAAlL,IAAA,WAAAC,MAAA,eAAAoX,GAAA3C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAA0C,EAAeC,EAAMC,GAAQ,IAAAC,EAAA,OAAA9C,EAAAA,EAAAA,KAAAK,MAAA,SAAA0C,GAAA,cAAAA,EAAAxC,KAAAwC,EAAAvC,MAAA,cAAAuC,EAAAvC,KAAA,EACJpZ,KAAK6X,QAAQuD,KAAK,cAAe,CAAEI,KAAAA,EAAMC,SAAAA,IAAYG,OAAM,SAACjV,GACjF,MAAM,IAAInG,MAAM6T,EAAO,mCAAoCmH,GAAO,CAAEK,MAAOlV,GAC7E,IAAE,OAFY,GAAR+U,EAAQC,EAAAG,KAGC,CAAFH,EAAAvC,KAAA,cACL,IAAI5Y,MAAM,kBAAiB,cAAAmb,EAAAjC,OAAA,SAE5BgC,EAASzN,MAAI,wBAAA0N,EAAAhC,OAAA,GAAA4B,EAAA,UACrB,gBAAAQ,EAAAC,GAAA,OAAAV,EAAAxI,MAAA,KAAA3D,UAAA,EATA,IASA,CAAAlL,IAAA,YAAAC,MAAA,eAAA+X,GAAAtD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAqD,EAAgBV,EAAMnY,EAAStD,GAAO,IAAA0b,EAAAU,EAAA,OAAAvD,EAAAA,EAAAA,KAAAK,MAAA,SAAAmD,GAAA,cAAAA,EAAAjD,KAAAiD,EAAAhD,MAAA,OAQnC,OAPGqC,OAAW,EACXU,GAAY,EACO,kBAAZpc,GACT0b,EAAW1b,EAAQ0b,SACnBU,IAAcpc,EAAQoc,WACM,kBAAZpc,IAChB0b,EAAW1b,GACZqc,EAAAhD,KAAA,EACKpZ,KAAK6X,QAAQuD,KAAK,eAAgB,CAAEI,KAAAA,EAAMnY,QAAAA,EAASoY,SAAAA,EAAUU,UAAAA,IAAaP,OAAM,SAACjV,GACrF,MAAM,IAAInG,MAAM6T,EAAO,oCAAqCmH,GAAO,CAAEK,MAAOlV,GAC9E,IAAE,wBAAAyV,EAAAzC,OAAA,GAAAuC,EAAA,UACH,gBAAAG,EAAAC,EAAAC,GAAA,OAAAN,EAAAnJ,MAAA,KAAA3D,UAAA,EAbA,IAaA,CAAAlL,IAAA,UAAAC,MAAA,eAAAsY,GAAA7D,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAA4D,EAAcjB,GAAI,IAAAE,EAAA,OAAA9C,EAAAA,EAAAA,KAAAK,MAAA,SAAAyD,GAAA,cAAAA,EAAAvD,KAAAuD,EAAAtD,MAAA,cAAAsD,EAAAtD,KAAA,EACOpZ,KAAK6X,QAAQuD,KAAK,aAAc,CAAEI,KAAAA,IAAQI,OAAM,SAACjV,GACtE,MAAM,IAAInG,MAAM6T,EAAO,wCAAyCmH,GAAO,CAAEK,MAAOlV,GAClF,IAAE,OAFY,GAAR+U,EAAQgB,EAAAZ,KAGC,CAAFY,EAAAtD,KAAA,cACL,IAAI5Y,MAAM,uBAAsB,cAAAkc,EAAAhD,OAAA,SAEjCgC,EAASzN,MAAI,wBAAAyO,EAAA/C,OAAA,GAAA8C,EAAA,UACrB,gBAAAE,GAAA,OAAAH,EAAA1J,MAAA,KAAA3D,UAAA,EATA,IASA,CAAAlL,IAAA,QAAAC,MAAA,eAAA0Y,GAAAjE,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAgE,EAAYrB,EAAMzb,GAAO,IAAAoc,EAAA,OAAAvD,EAAAA,EAAAA,KAAAK,MAAA,SAAA6D,GAAA,cAAAA,EAAA3D,KAAA2D,EAAA1D,MAAA,OACe,OAAhC+C,IAAqB,OAAPpc,QAAO,IAAPA,IAAAA,EAASoc,WAASW,EAAA1D,KAAA,EAChCpZ,KAAK6X,QAAQuD,KAAK,WAAY,CAAEI,KAAAA,EAAMW,UAAAA,IAAaP,OAAM,SAACjV,GAC9D,MAAM,IAAInG,MAAM6T,EAAO,wCAAyCmH,GAAO,CAAEK,MAAOlV,GAClF,IAAE,wBAAAmW,EAAAnD,OAAA,GAAAkD,EAAA,UACH,gBAAAE,EAAAC,GAAA,OAAAJ,EAAA9J,MAAA,KAAA3D,UAAA,EANA,IAMA,CAAAlL,IAAA,OAAAC,MAAA,eAAA+Y,GAAAtE,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAqE,EAAW1B,GAAI,IAAAE,EAAA,OAAA9C,EAAAA,EAAAA,KAAAK,MAAA,SAAAkE,GAAA,cAAAA,EAAAhE,KAAAgE,EAAA/D,MAAA,cAAA+D,EAAA/D,KAAA,EACUpZ,KAAK6X,QAAQuD,KAAK,UAAW,CAAEI,KAAAA,IAAQI,OAAM,SAACjV,GACnE,MAAM,IAAInG,MAAM6T,EAAO,mCAAoCmH,GAAO,CAAEK,MAAOlV,GAC7E,IAAE,OAFY,GAAR+U,EAAQyB,EAAArB,KAGC,CAAFqB,EAAA/D,KAAA,cACL,IAAI5Y,MAAM,kBAAiB,cAAA2c,EAAAzD,OAAA,SAE5BgC,EAASzN,MAAI,wBAAAkP,EAAAxD,OAAA,GAAAuD,EAAA,UACrB,gBAAAE,GAAA,OAAAH,EAAAnK,MAAA,KAAA3D,UAAA,EATA,IASA,CAAAlL,IAAA,KAAAC,MAAA,eAAAmZ,GAAA1E,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAyE,EAAS9B,EAAMzb,GAAO,IAAAwd,EAAAC,EAAArB,EAAA,OAAAvD,EAAAA,EAAAA,KAAAK,MAAA,SAAAwE,GAAA,cAAAA,EAAAtE,KAAAsE,EAAArE,MAAA,OACI,OAAhBoE,GADYD,EACSxd,GAAW,CAAC,GAAjCyd,MAAOrB,EAASoB,EAATpB,UAASsB,EAAArE,KAAA,EAClBpZ,KAAK6X,QAAQuD,KAAK,QAAS,CAAEI,KAAAA,EAAMgC,MAAAA,EAAOrB,UAAAA,IAAaP,OAAM,SAACjV,GAClE,MAAM,IAAInG,MAAM6T,EAAO,qCAAsCmH,GAAO,CAAEK,MAAOlV,GAC/E,IAAE,wBAAA8W,EAAA9D,OAAA,GAAA2D,EAAA,UACH,gBAAAI,EAAAC,GAAA,OAAAN,EAAAvK,MAAA,KAAA3D,UAAA,EANA,IAMA,CAAAlL,IAAA,QAAAC,MAAA,eAAA0Z,GAAAjF,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAgF,EAAYpG,EAAUqG,EAAUnc,GAAQ,IAAAoc,EAAAC,EAAA,YAAApF,EAAAA,EAAAA,KAAAK,MAAA,SAAAgF,GAAA,cAAAA,EAAA9E,KAAA8E,EAAA7E,MAAA,OACO,OAAvC2E,GAAY,EAAIhD,GAAaT,WAAU2D,EAAA7E,KAAA,EACvCpZ,KAAK6X,QAAQuD,KAAK,WAAY,CAAE2C,UAAAA,EAAWtG,SAAAA,EAAUqG,SAAAA,IAAW,OAOnE,OANH9d,KAAK6X,QAAQ0B,GAAG,kBAAkB,SAAA2E,GAAc,IAAXjQ,EAAIiQ,EAAJjQ,KACnC,GAAIA,EAAK8P,YAAcA,GAAapc,EAAU,CAC5C,IAAM2W,GAAGoC,EAAAA,EAAAA,GAAA,GAAQzM,UACVqK,EAAIyF,UACXpc,EAAS2W,EACX,CACF,IAAG2F,EAAAvE,OAAA,SACI,CACLyE,QAAS,kBAAMH,EAAKnG,QAAQuD,KAAK,aAAc,CAAE2C,UAAAA,GAAY,IAC9D,wBAAAE,EAAAtE,OAAA,GAAAkE,EAAA,UACF,gBAAAO,EAAAC,EAAAC,GAAA,OAAAV,EAAA9K,MAAA,KAAA3D,UAAA,EAdA,MAcA6L,CAAA,CAxEc,GA4EbuD,GAA8BzV,EAAQoL,KACtCsK,GAAQ,WACV,SAAAA,EAAY3G,IAASxI,EAAAA,EAAAA,GAAA,KAAAmP,GACnBxe,KAAK6X,QAAUA,CACjB,CAGC,OAHAjI,EAAAA,EAAAA,GAAA4O,EAAA,EAAAva,IAAA,SAAAC,MACD,WACE,OAAO,IAAIua,GAAaze,KAAK6X,QAC/B,KAAC2G,CAAA,CANS,GAQRC,GAAY,WACd,SAAAA,EAAY5G,GAAS,IAAA6G,EAAA,MAAArP,EAAAA,EAAAA,GAAA,KAAAoP,IAAA9O,EAAAA,EAAAA,GAAA,mBAAAA,EAAAA,EAAAA,GAAA,sBAAAA,EAAAA,EAAAA,GAAA,uBAAAA,EAAAA,EAAAA,GAAA,uBAAAA,EAAAA,EAAAA,GAAA,qBACnB3P,KAAK6X,QAAUA,EACf7X,KAAKgO,MAAQ,UACbhO,KAAK2e,OAAS,IAAIJ,GAA4B9M,QAC9CzR,KAAK4e,OAAS,IAAIL,GAA4B9M,QAC9CzR,KAAK6e,MAAQ,CACXC,MAAO,SAAC7Q,GACN,IAAKyQ,EAAKK,GACR,MAAM,IAAIve,MAAM,6DAElB,OAAOke,EAAK7G,QAAQuD,KAAK,cAAe,CAAEnN,KAAAA,EAAM+Q,SAAUN,EAAKK,IACjE,GAEF/e,KAAKif,kBACP,CA4DC,OA5DArP,EAAAA,EAAAA,GAAA6O,EAAA,EAAAxa,IAAA,mBAAAC,MAMD,WAAmB,IAAAgb,EAAA,KACjBlf,KAAK6X,QAAQ0B,GAAG,cAAc,SAAChY,GAC7B,IAAQ0M,EAAS1M,EAAT0M,KACR,GAAIA,EAAK+Q,WAAaE,EAAKH,GAG3B,OAAQ9Q,EAAKsK,QAAQ9V,MACnB,IAAK,MACHyc,EAAKP,OAAO1K,KAAK,OAAQhG,EAAKsK,QAAQtK,MACtC,MAEF,IAAK,MACHiR,EAAKN,OAAO3K,KAAK,OAAQhG,EAAKsK,QAAQtK,MAI5C,GACF,GAAC,CAAAhK,IAAA,aAAAC,MAAA,eAAAib,GAAAxG,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAuG,EAAiBC,EAASC,GAAI,IAAAvf,EAAAwf,EAAAC,EAAArQ,UAAA,OAAAyJ,EAAAA,EAAAA,KAAAK,MAAA,SAAAwG,GAAA,cAAAA,EAAAtG,KAAAsG,EAAArG,MAAA,OAC6E,OAD3ErZ,EAAOyf,EAAAja,OAAA,QAAA6J,IAAAoQ,EAAA,GAAAA,EAAA,GAAG,CAAC,EACzC5a,GAAW5E,KAAK+e,GAAI,qFAAqFU,EAAArG,KAAA,EACjFpZ,KAAK6X,QAAQuD,KAAK,mBAAoB,CAAEiE,QAAAA,EAASC,KAAAA,EAAMvf,QAAAA,IAAU,OAGlE,OAHjBwf,EAASE,EAAA3D,KACflX,EAAU2a,EAAW,6FACrBvf,KAAK+e,GAAKQ,EAAUR,GACpB/e,KAAKgO,MAAQ,UAAUyR,EAAA/F,OAAA,SAChB6F,GAAS,wBAAAE,EAAA9F,OAAA,GAAAyF,EAAA,UACjB,gBAAAM,EAAAC,GAAA,OAAAR,EAAArM,MAAA,KAAA3D,UAAA,EARA,IAQA,CAAAlL,IAAA,KAAAC,MAAA,eAAA0b,GAAAjH,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAgH,EAASte,EAASI,GAAQ,IAAAme,EAAA,YAAAlH,EAAAA,EAAAA,KAAAK,MAAA,SAAA8G,GAAA,cAAAA,EAAA5G,KAAA4G,EAAA3G,MAAA,OAAA2G,EAAAC,GAChBze,EAAOwe,EAAA3G,KACR,aADQ2G,EAAAC,GACE,EAMV,SANUD,EAAAC,GAMJ,iBAHN,OAFHhgB,KAAK6X,QAAQ0B,GAAG,mBAAmB,SAAA0G,GAAc,IAAXhS,EAAIgS,EAAJhS,KACpCtM,EAASsM,EAAKhO,OAChB,IAAG8f,EAAArG,OAAA,iBAQA,OAJH1Z,KAAK6X,QAAQ0B,GAAG,eAAe,SAAA2G,GAAc,IAAXjS,EAAIiS,EAAJjS,KAC5BA,EAAK+Q,WAAac,EAAKf,IACzBpd,EAASsM,EAAKkS,SAAUlS,EAAKtH,MAEjC,IAAGoZ,EAAArG,OAAA,kCAAAqG,EAAApG,OAAA,GAAAkG,EAAA,UAIR,gBAAAO,EAAAC,GAAA,OAAAT,EAAA9M,MAAA,KAAA3D,UAAA,EAlBA,IAkBA,CAAAlL,IAAA,OAAAC,MAAA,eAAAoc,GAAA3H,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAA0H,IAAA,IAAAC,EAAA,YAAA5H,EAAAA,EAAAA,KAAAK,MAAA,SAAAwH,GAAA,cAAAA,EAAAtH,KAAAsH,EAAArH,MAAA,OAKsB,OAJpBxU,EACE5E,KAAK+e,GACL,kGAEF/e,KAAKgO,MAAQ,OAAOyS,EAAArH,KAAA,EACdpZ,KAAK6X,QAAQuD,KAAK,aAAc,CAAE2D,GAAI/e,KAAK+e,KAAMnD,OAAM,SAACjV,GAC5D,MAAM,IAAInG,MAAM6T,EAAO,oCAAqCmM,EAAKzB,IAAK,CAAElD,MAAOlV,GACjF,IAAE,OACF3G,KAAK+e,QAAK,EAAO,wBAAA0B,EAAA9G,OAAA,GAAA4G,EAAA,UAClB,yBAAAD,EAAAxN,MAAA,KAAA3D,UAAA,EAXA,MAWAsP,CAAA,CA3Ea,GA+EZiC,GAA2B5X,EAAQwH,KAEnCqQ,GAAU,WACZ,SAAAA,EAAY9I,IAASxI,EAAAA,EAAAA,GAAA,KAAAsR,GACnB3gB,KAAK6X,QAAUA,CACjB,CA+CC,OA/CAjI,EAAAA,EAAAA,GAAA+Q,EAAA,EAAA1c,IAAA,UAAAC,MAAA,eAAA0c,GAAAjI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAgI,EAActI,EAASvC,GAAS,IAAA8K,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAhS,UAAA,OAAAyJ,EAAAA,EAAAA,KAAAK,MAAA,SAAAmI,GAAA,cAAAA,EAAAjI,KAAAiI,EAAAhI,MAAA,OAInB,OAJqB0H,EAAOK,EAAA5b,OAAA,QAAA6J,IAAA+R,EAAA,GAAAA,EAAA,GAL7B,IAMJJ,EAAe,IAAIL,GAAyB/R,gBAC5CqS,EAAgBvH,YAAW,WAC/BsH,EAAahT,QACf,GAAG+S,GAAQM,EAAAhI,KAAA,EACsBpZ,KAAK6X,QAAQuD,KAAK,mBAAoB7C,GAASqD,OAAM,SAACjV,GACrFoa,EAAahT,OACX,IAAIvN,MACF6T,EACE,qEACAkE,EAAQ8I,cACR9I,EAAQ+I,OAIhB,IAAE,OAiBC,OA3BGL,EAAkBG,EAAAtF,MAWlBoF,EAAeD,GAAsBjL,EAAUiL,KAEnDF,EAAajT,QAAQ,CACnByT,IAAKN,EAAmBM,IACxBD,KAAML,EAAmBK,KACzBD,cAAeJ,EAAmBI,gBAGtCrhB,KAAK6X,QAAQ0B,GAAG,sBAAsB,SAAAiI,GAAc,IAAXvT,EAAIuT,EAAJvT,MAClCiT,GAAgBlL,EAAU/H,IAC7B8S,EAAajT,QAAQ,CACnByT,IAAKtT,EAAKsT,IACVD,KAAMrT,EAAKqT,KACXD,cAAepT,EAAKoT,eAG1B,IAAGD,EAAA1H,OAAA,SACIqH,EAAanG,SAAQ,WAC1BpB,aAAawH,EACf,KAAE,yBAAAI,EAAAzH,OAAA,GAAAkH,EAAA,UACH,gBAAAY,EAAAC,GAAA,OAAAd,EAAA9N,MAAA,KAAA3D,UAAA,EArCA,IAqCA,CAAAlL,IAAA,eAAAC,MAAA,eAAAyd,GAAAhJ,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAA+I,EAAmBP,EAAeP,GAAO,OAAAlI,EAAAA,EAAAA,KAAAK,MAAA,SAAA4I,GAAA,cAAAA,EAAA1I,KAAA0I,EAAAzI,MAAA,cAAAyI,EAAAnI,OAAA,SAChC1Z,KAAK8hB,QAAQ,CAAET,cAAAA,IAAiB,SAACpT,GAAI,OAAKA,EAAKoT,gBAAkBA,CAAa,GAAEP,GAASlF,OAAM,SAACjV,GACrG,MAAM,IAAInG,MAAM6T,EAAO,iCAAkCgN,GAAgB,CAAExF,MAAOlV,GACpF,KAAE,wBAAAkb,EAAAlI,OAAA,GAAAiI,EAAA,UACH,gBAAAG,EAAAC,GAAA,OAAAL,EAAA7O,MAAA,KAAA3D,UAAA,EALA,IAKA,CAAAlL,IAAA,cAAAC,MAAA,eAAA+d,GAAAtJ,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAqJ,EAAkBZ,EAAMR,GAAO,OAAAlI,EAAAA,EAAAA,KAAAK,MAAA,SAAAkJ,GAAA,cAAAA,EAAAhJ,KAAAgJ,EAAA/I,MAAA,cAAA+I,EAAAzI,OAAA,SACtB1Z,KAAK8hB,QAAQ,CAAER,KAAAA,IAAQ,SAACrT,GAAI,OAAKA,EAAKqT,OAASA,CAAI,GAAER,GAASlF,OAAM,SAACjV,GAC1E,MAAM,IAAInG,MAAM6T,EAAO,0BAA2BiN,GAAO,CAAEzF,MAAOlV,GACpE,KAAE,wBAAAwb,EAAAxI,OAAA,GAAAuI,EAAA,UACH,gBAAAE,EAAAC,GAAA,OAAAJ,EAAAnP,MAAA,KAAA3D,UAAA,EALA,MAKAwR,CAAA,CAlDW,GAuDV2B,GAASpL,GAAY,YACrBqL,GAAO,WACT,SAAAA,EAAYxiB,IAASsP,EAAAA,EAAAA,GAAA,KAAAkT,IAAA5S,EAAAA,EAAAA,GAAA,eAUX,OAAIA,EAAAA,EAAAA,GAAA,4BAAAA,EAAAA,EAAAA,GAAA,oBAAAA,EAAAA,EAAAA,GAAA,qBAGE,OAAIA,EAAAA,EAAAA,GAAA,gBACT,OAAIA,EAAAA,EAAAA,GAAA,kBACF,MAdX3P,KAAKD,QAAUA,EACf6E,EACE5E,KAAKD,QAAQyiB,OACb,6GACAxiB,KAAKD,QAAQyiB,QAEfxiB,KAAKuhB,IAAMvhB,KAAKD,QAAQ0iB,YAVF,yCAWtBziB,KAAK0iB,aAAc,CACrB,CAoFC,OApFA9S,EAAAA,EAAAA,GAAA2S,EAAA,EAAAte,IAAA,UAAAC,MAAA,eAAAye,GAAAhK,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAOD,SAAA+J,IAAA,IAAAC,EAAAL,EAAAM,EAAAC,EAAAC,EAAAC,EAAA,YAAArK,EAAAA,EAAAA,KAAAK,MAAA,SAAAiK,GAAA,cAAAA,EAAA/J,KAAA+J,EAAA9J,MAAA,OA6BI,OA7BJyJ,EAC6B7iB,KAAKD,QAAxByiB,EAAMK,EAANL,OAAQM,EAAMD,EAANC,OAChBR,GAAO,oDACDS,EAAoB,IAAIjI,GAAyBnM,gBAClD3O,KAAKuhB,KACRwB,EAAkBhV,OAChB,IAAIvN,MAAM,8FAGdoE,EACE4d,EAAOW,cACP,sFAEFnjB,KAAK6X,QAAU,IAAIH,GAAc8K,EAAOW,eAClCH,EAAmB,IAAIlI,GAAyBnM,gBACtD6T,EAAOY,aAAa,MAAOpjB,KAAKuhB,KAChCiB,EAAOrK,iBACL,QACA,WACE6K,EAAiBlV,SACnB,GACA,CAAEuV,MAAM,IAEVb,EAAOrK,iBACL,SACA,SAACyB,GACCoJ,EAAiBjV,OAAO6L,EAAMjT,MAChC,GACA,CAAE0c,MAAM,IACRH,EAAA9J,KAAA,GACI4J,EAAgB,QACuB,OAA7CV,GAAO,sCAAsCY,EAAA9J,KAAA,GACvCpZ,KAAK6X,QAAQyL,YAAW,QAO3B,OANHhB,GAAO,4CACPtiB,KAAK6X,QAAQuD,KAAK,UAAW,CAC3B0H,OAAAA,IAEF9iB,KAAK6X,QAAQ0B,GAAG,iBAAiB,WAC/BwJ,EAAkBjV,SACpB,IAAGoV,EAAAxJ,OAAA,SACIqJ,EAAkB3U,MAAK,WAC5BkU,GAAO,6CACPW,EAAKP,aAAc,CACrB,KAAE,yBAAAQ,EAAAvJ,OAAA,GAAAiJ,EAAA,UACH,yBAAAD,EAAA7P,MAAA,KAAA3D,UAAA,EAnDA,IAmDA,CAAAlL,IAAA,KAAAyB,IACD,WAKE,OAJAd,EACE5E,KAAK0iB,YACL,uGAEE1iB,KAAKujB,gBAGTvjB,KAAKujB,cAAgB,IAAIvI,GAAchb,KAAK6X,UAFnC7X,KAAKujB,aAIhB,GAAC,CAAAtf,IAAA,QAAAyB,IACD,WAKE,OAJAd,EACE5E,KAAK0iB,YACL,iGAEE1iB,KAAKwjB,WAGTxjB,KAAKwjB,SAAW,IAAIhF,GAASxe,KAAK6X,UAFzB7X,KAAKwjB,QAIhB,GAAC,CAAAvf,IAAA,UAAAyB,IACD,WAKE,OAJAd,EACE5E,KAAK0iB,YACL,mGAEE1iB,KAAKyjB,aAGTzjB,KAAKyjB,WAAa,IAAI9C,GAAW3gB,KAAK6X,UAF7B7X,KAAKyjB,UAIhB,KAAClB,CAAA,CA9FQ,G,qCG17BX,SAASmB,GAAkBlB,EAAQjB,GAC/B,OAAOoC,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WACnC,IAAImjB,EAAyCS,EAAO9C,EACpD,OAAO+C,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUgE,GAM/B,OALAmf,EAAgBX,EAAOW,eACvBW,EAAAA,EAAAA,GAAWX,EAAe,2DACf,IACM,GACjBS,EAAQ,EACD,CAAC,EAAc,IAAIzV,SAAQ,SAAUL,EAASC,GAoB7CyU,EAAOrK,iBAAiB,SAAS,WAAc,OAAOpK,EAAO,IAAIvN,MAAM,gBAAkB,IACzFgiB,EAAOrK,iBAAiB,SAAS,WAAc,OAAOpK,EAAO,IAAIvN,MAAM,WAAa,IApBhE,SAAhBujB,IACA,IAAIC,EAAa,SAAbA,IACAxK,aAAasH,GACb8C,EANC,GAOD9V,IACA0U,EAAOpK,oBAAoB,OAAQ4L,EACvC,EACIJ,GAVC,GAWD7V,GAAOpJ,EAAAA,EAAAA,GAAY,2CAGvB6d,EAAOY,aAAa,MAAO7B,GAC3BT,EAAUrH,YAAW,WACjBsK,IACAvB,EAAOpK,oBAAoB,OAAQ4L,EACvC,GAnBD,KAoBCJ,GAAgB,EAChBpB,EAAOrK,iBAAiB,OAAQ6L,GACpC,CAGAD,EACJ,IACR,GACJ,GACJ,CA8EA,IAAIzf,GAAU,CACV,CAAEH,KAnEN,SAA+BH,GAC3B,IAAImT,EAAQnT,EAAGmT,MAEX8M,EAAmB1Y,OAAO2Y,QAAQC,UAClCC,EAAc,GACdC,EAAkB,EAClBC,EAAkB,SAAU/C,GAC5BgD,OAAOlL,YAAY,CACf5W,KAAM,YACN8e,IAAKA,EACLiD,KAAMH,EAAkB,EACxBI,QAASJ,EAAkBD,EAAY7e,OAAS,EAChDrE,UAAWiW,EAAMjW,WAClB,IACP,EAOAM,OAAOkjB,OAAOnZ,OAAO2Y,QAAS,CAC1BS,GAAI,SAAUC,GACV,IAAIC,EAASR,EAAkBO,EAC/B,GAAIC,GAAU,GAAKA,GAAUT,EAAY7e,OAAS,EAAG,CAEjD,IAAIvB,EAAKogB,EADTC,EAAkBQ,GACqBtD,EAAMvd,EAAGud,IAAKvT,EAAQhK,EAAGgK,MAChEiW,EAAiBa,aAAapd,KAAK6D,OAAO2Y,QAASlW,EAAO,GAAIuT,GAC9D,IAAIwD,EAASC,SAASC,SAASC,KAC/BZ,EAAgBS,GAChBxZ,OAAOiN,cAAc,IAAI2M,cAAc,WAAY,CAAEnX,MAAOA,IAChE,CACJ,EACAwW,KAAM,WACFjZ,OAAO2Y,QAAQS,IAAI,EACvB,EACAF,QAAS,WACLlZ,OAAO2Y,QAAQS,GAAG,EACtB,EACAS,UAAW,SAAUpX,EAAOqX,EAAO9D,GAC/B0C,EAAiBa,aAAapd,KAAK6D,OAAO2Y,QAASlW,EAAOqX,EAAO9D,GAzBzE,SAAqBA,EAAKvT,GAEtBoW,EAAYzQ,OAAO0Q,EAAkB,GACrCD,EAAYhe,KAAK,CAAEmb,IAAKA,EAAKvT,MAAOA,IACpCqW,EAAkBD,EAAY7e,OAAS,CAC3C,CAqBQ+f,CAAY/D,EAAKvT,GACjBsW,EAAgBU,SAASC,SAASC,KACtC,EACAJ,aAAc,SAAU9W,EAAOqX,EAAO9D,GAClC0C,EAAiBa,aAAapd,KAAK6D,OAAO2Y,QAASlW,EAAOqX,EAAO9D,GACjE6C,EAAYC,GAAmB,CAAErW,MAAOA,EAAOuT,IAAKA,GACpD+C,EAAgBU,SAASC,SAASC,KACtC,IAcJ3Z,OAAO4M,iBAAiB,WAZxB,SAAuBnU,GACnB,IAAIiK,EAAOjK,EAAGiK,KACI,YAAdA,EAAKxL,KACLyhB,QAAQM,OAEW,eAAdvW,EAAKxL,KACVyhB,QAAQO,UAEW,YAAdxW,EAAKxL,MACVuiB,SAASC,SAASM,QAE1B,GAEJ,EAIkCpiB,WAAY4b,GAAI,mBAC9C,CACI5a,KAAM,kmgBACN4a,GAAI,gBAkBRyG,GAA8B,SAAUvW,GAExC,SAASuW,EAAaC,EAAUC,EAAa3lB,QACzB,IAAZA,IAAsBA,EAAU,CAAC,GACrC,IAAI6B,EAAQqN,EAAOvH,KAAK1H,KAAMylB,EAAUC,GAAaC,EAAAA,EAAAA,IAASA,EAAAA,EAAAA,GAAS,CAAC,EAAG5lB,GAAU,CAAE6lB,WAAY7lB,EAAQ6lB,eAAkB5lB,KAc7H,OAbA4B,EAAMikB,cAAgB,IAAIrjB,IAC1BZ,EAAMkkB,kBAAmB/iB,EAAAA,GAAAA,KACzBnB,EAAMmkB,aAAe,KACrBnkB,EAAMuP,QAAU,IAAIpQ,GAAAA,EAEpBa,EAAMokB,cAAcP,GAEpB7jB,EAAMmV,SAAW,IAAIwL,GAAQ,CACzBC,OAAQ5gB,EAAMqkB,eACdxD,WAAY7gB,EAAM7B,QAAQ6lB,aAG9BhkB,EAAMvB,cAAcqlB,GACb9jB,CACX,CAybA,OA3cAskB,EAAAA,EAAAA,GAAUV,EAAcvW,GAoBxBuW,EAAatlB,UAAU+a,MAAQ,SAAUrX,GACrC,OAAO+f,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WACnC,OAAO6jB,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUgE,GAC/B,OAAQA,EAAGmiB,OACP,KAAK,EAAG,MAAO,CAAC,EAAanmB,KAAK+W,SAASqP,WAC3C,KAAK,EAGD,OAFApiB,EAAG8X,OAEI,CAAC,EAAa9b,KAAK+W,SAASsP,GAAGC,KAAK1iB,IAC/C,KAAK,EAID,OAFAI,EAAG8X,OAEI,CAAC,EAAa9b,KAAKumB,mBAC9B,KAAK,EAGD,OADAviB,EAAG8X,OACI,CAAC,GAEpB,GACJ,GACJ,EAIA0J,EAAatlB,UAAUsmB,QAAU,SAAU5iB,GACvC,OAAO+f,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WACnC,IAAIymB,EAASC,EACb,OAAO7C,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUgE,GAC/B,OAAQA,EAAGmiB,OACP,KAAK,EAQD,OAPAniB,EAAG2iB,KAAKvgB,KAAK,CAAC,EAAG,EAAE,CAAG,IAEtBpG,KAAKC,OAAS,eACdD,KAAKU,SAAS,CAAE+B,KAAM,QAASmkB,WAAW,IACrC5mB,KAAK+lB,eACN/lB,KAAK+lB,aAAe/lB,KAAKib,MAAMrX,IAE5B,CAAC,EAAa5D,KAAK+lB,cAC9B,KAAK,EAGD,OAFA/hB,EAAG8X,OACH9b,KAAKU,SAAS,CAAE+B,KAAM,cACf,CAAC,EAAazC,KAAK6mB,2BAA2BjjB,IACzD,KAAK,EAGD,OAFA6iB,EAAWziB,EAAG8X,OAAQiD,GAEf,CAAC,EAAa/e,KAAK8mB,uBAAuBL,IACrD,KAAK,EAGD,OADAziB,EAAG8X,OACI,CAAC,EAAa9b,KAAK+mB,4BAC9B,KAAK,EAID,OAHA/iB,EAAG8X,OAEH9b,KAAKgnB,sBACE,CAAC,EAAa,GACzB,KAAK,EASD,OARAN,EAAQ1iB,EAAG8X,OACX9b,KAAKU,SAAS,CACV+B,KAAM,SACN8E,OAAQ,eACR0f,iBAAkB,QAClB5B,OAAO3e,EAAAA,GAAAA,GAAoBggB,KAE/B1mB,KAAKU,SAAS,CAAE+B,KAAM,OAAQykB,iBAAiB,IACxC,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,GAExB,GACJ,GACJ,EAIA1B,EAAatlB,UAAU2mB,2BAA6B,SAAUjjB,GAC1D,OAAO+f,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WACnC,IAAImnB,EACAnjB,EACApC,EAAQ5B,KACZ,OAAO6jB,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUonB,GAC/B,OAAQA,EAAGjB,OACP,KAAK,EAKD,OAJAgB,GAAqB3jB,EAAAA,GAAAA,GAAWI,EAAM,kBACtC5D,KAAKqnB,iBAAkBjjB,EAAAA,GAAAA,GAA2B+iB,GAClDnnB,KAAKsnB,qBAAuBtnB,KAAK+W,SAASwQ,MAAMxf,SAEzC,CAAC,EAAa/H,KAAKsnB,qBAAqB/N,GAAG,QAAQ,SAAU4G,GAC5Dve,EAAMlB,SAAS,CACX+B,KAAM,SACN8E,OAAQ,eACR0f,iBAAkB,QAClB5B,OAAO1gB,EAAAA,EAAAA,GAAY,uBAAyBwb,EAAW,cAE/D,KACR,KAAK,EAGD,OADAiH,EAAGtL,OACI,CAAC,EAAa9b,KAAKsnB,qBAAqB/N,GAAG,YAAY,SAAUtL,GAChE,IAAIjK,EAAIojB,EACR,GAAmB,oBAAfnZ,EAAKD,OACU,qBAAfC,EAAKD,MASL,OARApM,EAAMlB,SAAS,CACX+B,KAAM,iBACNwL,MAAM0X,EAAAA,EAAAA,IAASA,EAAAA,EAAAA,GAAS,CAAC,EAAG1X,GAAO,CAAEoR,QAAS,CACL,QAAhCrb,EAAKpC,EAAMylB,uBAAoC,IAAPrjB,OAAgB,EAASA,EAAG,GACpC,QAAhCojB,EAAKxlB,EAAMylB,uBAAoC,IAAPD,OAAgB,EAASA,EAAG,GAAG/R,KAAK,MAC/EA,KAAK,cAEfzT,EAAM3B,OAAS,2BAGnB2B,EAAMlB,SAAS,CAAE+B,KAAM,iBAAkBwL,KAAMA,GACnD,KACR,KAAK,EAQD,OAPAmZ,EAAGtL,OACH9b,KAAKsnB,qBAAqB3I,OAAOpF,GAAG,QAAQ,SAAUtL,GAClDrM,EAAMlB,SAAS,CAAE+B,KAAM,SAAU8V,QAAS,CAAEtK,KAAMA,EAAMxL,KAAM,QAClE,IACAzC,KAAKsnB,qBAAqB1I,OAAOrF,GAAG,QAAQ,SAAUtL,GAClDrM,EAAMlB,SAAS,CAAE+B,KAAM,SAAU8V,QAAS,CAAEtK,KAAMA,EAAMxL,KAAM,QAClE,IACO,CAAC,GAAcuB,EAAKhE,KAAKsnB,sBAAsBE,WAAW1U,MAAM9O,EAAIhE,KAAKqnB,kBACpF,KAAK,EAAG,MAAO,CAAC,EAAcD,EAAGtL,QAEzC,GACJ,GACJ,EACA0J,EAAatlB,UAAU4mB,uBAAyB,SAAU/H,GACtD,OAAO4E,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WACnC,IAAIuhB,EACJ,OAAOsC,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUgE,GAC/B,OAAQA,EAAGmiB,OACP,KAAK,EAED,OADAnmB,KAAKynB,sBAAmBrY,EACjB,CAAC,EAAapP,KAAK+W,SAASD,QAAQ4Q,aAAa3I,IAC5D,KAAK,EAGD,OAFAwC,EAAOvd,EAAG8X,OAAQyF,IAClBvhB,KAAKynB,iBAAmBlG,EAAMvhB,KAAKD,QAAQ4nB,WACpC,CAAC,GAEpB,GACJ,GACJ,EAQAnC,EAAatlB,UAAU8lB,cAAgB,SAAUP,GAC7C,IAAIzhB,EA/Q+Bwe,EAAQziB,EAmR3C,GAAwB,kBAAb0lB,EAAuB,CAC9B,IAAImC,EAAU5C,SAAS6C,cAAcpC,IACrC3B,EAAAA,EAAAA,GAAW8D,EAAS,gBAAkBnC,EAAW,mBACjDzlB,KAAKwiB,OAASwC,SAAS8C,cAAc,SACzC,MAEI9nB,KAAKwiB,OAASiD,EAzRiBjD,EA4RRxiB,KAAKwiB,OA5RWziB,EA4RHC,KAAKD,QA3RjDyiB,EAAOuF,MAAMC,OAAS,IACtBxF,EAAOuF,MAAME,MAAQloB,EAAQkoB,OAAS,OACtCzF,EAAOuF,MAAMG,OAASnoB,EAAQmoB,QAAU,OACxC1F,EAAOuF,MAAMI,SAAW,SACxB3F,EAAO4F,MAAQ,yBAwRXtE,EAAAA,EAAAA,GAAW9jB,KAAKwiB,OAAO6F,WAAY,4CAKnCroB,KAAKimB,eAAiBjB,SAAS8C,cAAc,UAC7C9nB,KAAKimB,eAAeqC,UAAU3d,IAAI,mBACA,QAAjC3G,EAAKhE,KAAKwiB,OAAO6F,kBAA+B,IAAPrkB,GAAyBA,EAAGukB,YAAYvoB,KAAKimB,eAC3F,EACAT,EAAatlB,UAAU6mB,yBAA2B,WAC9C,OAAOpD,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WACnC,OAAO6jB,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUgE,GAC/B,OAAQA,EAAGmiB,OACP,KAAK,EACD,OAAKnmB,KAAKynB,iBACH,CAAC,EAAa/D,GAAkB1jB,KAAKwiB,OAAQxiB,KAAKynB,mBADtB,CAAC,EAAa,GAErD,KAAK,EACDzjB,EAAG8X,OACH9X,EAAGmiB,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,GAExB,GACJ,GACJ,EAKAX,EAAatlB,UAAU8mB,oBAAsB,WACzChnB,KAAKC,OAAS,OACdD,KAAKU,SAAS,CAAE+B,KAAM,OAAQykB,iBAAiB,IAC3ClnB,KAAKynB,kBACLznB,KAAKU,SAAS,CACV+B,KAAM,YACN8e,IAAKvhB,KAAKynB,iBACVjD,MAAM,EACNC,SAAS,GAGrB,EACAe,EAAatlB,UAAUqmB,gBAAkB,WACrC,OAAO5C,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WACnC,IAAI4B,EAAQ5B,KACZ,OAAO6jB,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUgE,GAC/B,OAAQA,EAAGmiB,OACP,KAAK,EAkBD,OAjBA5a,OAAO4M,iBAAiB,WAAW,SAAUyB,GAvP1C,IAAU4I,EAAQthB,EHq6BX,mBG7qBF0Y,EAAM3L,KAAKxL,OAxPN+f,EAyPgB5gB,EAAM4gB,OAzPdthB,EAyPsBU,EAAMkkB,iBAxPrExhB,GAAQ5C,SAAQ,SAAUsC,GACtB,IAAIojB,EACAjjB,EAAOH,EAAGG,KACV5C,EAAU,CACVinB,IAFqBxkB,EAAG+a,GAGxBtc,KH85Bc,oBG75Bd0B,KAAM,sBAAwBA,EAC9BgT,MAAO,CAAEjW,UAAWA,IAEQ,QAA/BkmB,EAAK5E,EAAOW,qBAAkC,IAAPiE,GAAyBA,EAAG/N,YAAY9X,EAAS,IAC7F,KAgPgD,cAApBqY,EAAM3L,KAAKxL,MACXmX,EAAM3L,KAAK/M,YAAcU,EAAMkkB,iBAC/BlkB,EAAMlB,SAAS,CACX+B,KAAM,YACN8e,IAAK3H,EAAM3L,KAAKsT,IAChBiD,KAAM5K,EAAM3L,KAAKuW,KACjBC,QAAS7K,EAAM3L,KAAKwW,UAGnB7K,EAAM3L,KAAK/M,YAAcU,EAAMkkB,kBACpClkB,EAAMlB,SAASkZ,EAAM3L,KAE7B,IACO,CAAC,EAAajO,KAAK+W,SAASsP,GAAGoC,MAAM,CAAC,KAAM,CAC3C,QACA,eACA,QACA,OACA,SACA,UACA,cACD,SAAUlnB,GAAW,OAAOoiB,EAAAA,EAAAA,GAAU/hB,OAAO,OAAQ,GAAQ,WAC5D,IAAIgY,EAAO4B,EAAgBnY,EAASqlB,EAAYC,EAChD,OAAO9E,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUonB,GAC/B,OAAQA,EAAGjB,OACP,KAAK,EACD,OAAK5kB,GAGLia,EAAO,YADP5B,EAAQrY,GAEFqY,EAAMgP,QACN,SAAUhP,EACNA,EAAM4B,KACN,GACH,CAAC,EAAaxb,KAAK+W,SAASsP,GAAGwC,KAAKrN,KAPhC,CAAC,GAQhB,KAAK,EAED,GAAa,SADL4L,EAAGtL,OAAQrZ,KAEf,MAAO,CAAC,EAAc,MAC1B2kB,EAAGjB,MAAQ,EACf,KAAK,EAGD,OAFAiB,EAAGT,KAAKvgB,KAAK,CAAC,EAAG,GAAG,CAAG,KAClBwT,EAAMnX,MAEP,IAAK,SACL,IAAK,SAAU,MAAO,CAAC,EAAa,GACpC,IAAK,SAAU,MAAO,CAAC,EAAa,GACpC,IAAK,SAAU,MAAO,CAAC,EAAa,GACpC,IAAK,QAAS,MAAO,CAAC,EAAa,GAEvC,MAAO,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAazC,KAAK+W,SAASsP,GAAGyC,SAASlP,EAAM4B,KAAM,SACnE,KAAK,EAQD,OAPAnY,EAAU+jB,EAAGtL,OACb9b,KAAKU,SAAS,CACV+B,KAAM,YACN+Y,KAAM5B,EAAM4B,KACZnY,QAASA,IAEbrD,KAAK6lB,cAAcje,IAAIgS,EAAM4B,MAAMpY,EAAAA,GAAAA,GAAYC,IACxC,CAAC,EAAa,GACzB,KAAK,EAMD,OALArD,KAAKU,SAAS,CACV+B,KAAM,YACN+Y,KAAM5B,EAAM4B,OAEhBxb,KAAK6lB,cAAsB,OAAEjM,EAAM4B,MAC5B,CAAC,EAAa,GACzB,KAAK,EAMD,OALAxb,KAAKU,SAAS,CACV+B,KAAM,YACN+Y,KAAM5B,EAAMmP,UAEhB/oB,KAAK6lB,cAAsB,OAAEjM,EAAMmP,SAC5B,CAAC,EAAa/oB,KAAK+W,SAASsP,GAAGyC,SAASlP,EAAMgP,QAAS,SAClE,KAAK,EAQD,OAPAF,EAAatB,EAAGtL,OAChB9b,KAAKU,SAAS,CACV+B,KAAM,YACN+Y,KAAM5B,EAAMgP,QACZvlB,QAASqlB,IAEb1oB,KAAK6lB,cAAcje,IAAIgS,EAAMgP,SAASxlB,EAAAA,GAAAA,GAAYslB,IAC3C,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAAG,MAAO,CAAC,EAAa,IAC7B,KAAK,GAQD,OAPAC,EAAQvB,EAAGtL,OACX9b,KAAKU,SAAS,CACV+B,KAAM,SACN8E,OAAQ,eACR0f,iBAAkB,QAClB5B,OAAO3e,EAAAA,GAAAA,GAAoBiiB,KAExB,CAAC,EAAa,IACzB,KAAK,GAAI,MAAO,CAAC,GAEzB,GACJ,GAAI,KACZ,KAAK,EAED,OADA3kB,EAAG8X,OACI,CAAC,GAEpB,GACJ,GACJ,EAIA0J,EAAatlB,UAAU8oB,oBAAsB,WACzC,IAAIhlB,EACJ,OAAO2f,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WACnC,OAAO6jB,EAAAA,EAAAA,GAAY7jB,MAAM,SAAUonB,GAC/B,OAAQA,EAAGjB,OACP,KAAK,EACD,OAAMnmB,KAAKsnB,sBAAwBtnB,KAAKqnB,iBAExCrnB,KAAKU,SAAS,CAAE+B,KAAM,QAASmkB,WAAW,IAC1C5mB,KAAKC,OAAS,eAEP,CAAC,EAAaD,KAAKsnB,qBAAqB2B,SALkB,CAAC,EAAa,GAMnF,KAAK,EASD,OAPA7B,EAAGtL,OACoB,QAAtB9X,EAAKhE,KAAKwiB,cAA2B,IAAPxe,GAAyBA,EAAGklB,gBAAgB,QAC3ElpB,KAAK+W,SAASsP,GAAG8C,GAAG,sBAAuB,CACvChN,WAAW,EACXqB,OAAO,IAGJ,CAAC,EAAaxd,KAAKwmB,QAAQhlB,OAAO4nB,YAAYppB,KAAK6lB,iBAC9D,KAAK,EAEDuB,EAAGtL,OACHsL,EAAGjB,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,GAExB,GACJ,GACJ,EACAX,EAAatlB,UAAUG,cAAgB,SAAUgpB,GAC7C,IACIrlB,EADApC,EAAQ5B,KAERspB,GAAU3lB,EAAAA,GAAAA,GAAqB0lB,EAAMzlB,OAIgD,aAA/C,QAApCI,EAAKhE,KAAKsnB,4BAAyC,IAAPtjB,OAAgB,EAASA,EAAGgK,QAa9EhO,KAAKU,SAAS,CACV6oB,aAAa,EACbD,QAASA,EACTE,SAAUH,EAAMG,SAChB/mB,KAAM,YAOVjB,OAAOqC,QAAQylB,GAAS5nB,SAAQ,SAAUsC,GACtC,IAAIC,EAAMD,EAAG,GAAIE,EAAQF,EAAG,GAC5BpC,EAAMikB,cAAcje,IAAI3D,GAAKb,EAAAA,GAAAA,GAAYc,GAC7C,KA1BI1C,OAAOqC,QAAQylB,GAAS5nB,SAAQ,SAAUsC,GACtC,IAAIC,EAAMD,EAAG,GAAIE,EAAQF,EAAG,GACvBpC,EAAMikB,cAAcngB,IAAIzB,KACzBT,EAAAA,GAAAA,GAAWU,MAAWV,EAAAA,GAAAA,GAAW5B,EAAMikB,cAAcngB,IAAIzB,KACzDrC,EAAMmV,SAASsP,GAAGoD,UAAUxlB,EAAKC,EAAO,CAAEiY,WAAW,GAE7D,GAqBR,EACAqJ,EAAatlB,UAAUQ,SAAW,SAAUa,GACxC,IAAIyC,EAAIojB,EACR,OAAOzD,EAAAA,EAAAA,GAAU3jB,UAAM,OAAQ,GAAQ,WAEnC,OAAO6jB,EAAAA,EAAAA,GAAY7jB,MAAM,SAAU0pB,GAC/B,OAAQA,EAAGvD,OACP,KAAK,EAED,OADK5kB,EAAQkB,MAET,IAAK,UAAW,MAAO,CAAC,EAAa,GACrC,IAAK,UAAW,MAAO,CAAC,EAAa,GACrC,IAAK,UACL,IAAK,aAAc,MAAO,CAAC,EAAa,GACxC,IAAK,gBAAiB,MAAO,CAAC,EAAa,GAC3C,IAAK,oBAAqB,MAAO,CAAC,EAAa,GAEnD,MAAO,CAAC,EAAa,GACzB,KAAK,EAED,OADAzC,KAAKwmB,QAAQjlB,EAAQ+nB,SACd,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAatpB,KAAK+mB,4BAClC,KAAK,EAED,OADA2C,EAAG5N,OACI,CAAC,EAAa,GACzB,KAAK,EAED,OADoF,QAAnFsL,EAA4B,QAAtBpjB,EAAKhE,KAAKwiB,cAA2B,IAAPxe,OAAgB,EAASA,EAAGmf,qBAAkC,IAAPiE,GAAyBA,EAAG/N,YAAY9X,EAAS,KACtI,CAAC,EAAa,GACzB,KAAK,EAED,OADAvB,KAAKgpB,sBACE,CAAC,EAAa,GACzB,KAAK,EAED,OADAzd,OAAOoe,KAAK3pB,KAAKynB,iBAAkB,UAC5B,CAAC,EAAa,GACzB,KAAK,EACDznB,KAAKmR,QAAQzQ,SAASa,GACtBmoB,EAAGvD,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,GAExB,GACJ,GACJ,EACAX,EAAatlB,UAAUU,OAAS,SAAUe,GACtC,OAAO3B,KAAKmR,QAAQxP,SAASA,EACjC,EACA6jB,EAAatlB,UAAUO,QAAU,WAC7BT,KAAKimB,eAAe2D,SACpB5pB,KAAKmR,QAAQ7P,SACjB,EACOkkB,CACX,CA7ckC,CA6chC5lB,GAAAA,E","sources":["../node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs","../node_modules/@codesandbox/sandpack-client/dist/client.utils-7a723432.mjs","../node_modules/@babel/runtime/helpers/esm/checkPrivateRedeclaration.js","../node_modules/@babel/runtime/helpers/esm/classPrivateMethodGet.js","../node_modules/@babel/runtime/helpers/esm/classExtractFieldDescriptor.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet.js","../node_modules/@babel/runtime/helpers/esm/classApplyDescriptorGet.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet.js","../node_modules/@babel/runtime/helpers/esm/classApplyDescriptorSet.js","../node_modules/@codesandbox/nodebox/build/index.mjs","../node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js","../node_modules/@codesandbox/sandpack-client/dist/clients/node/index.mjs"],"sourcesContent":["import { dequal } from 'dequal';\n\nvar SandpackClient = /** @class */ (function () {\n    function SandpackClient(iframeSelector, sandboxSetup, options) {\n        if (options === void 0) { options = {}; }\n        this.status = \"idle\";\n        this.options = options;\n        this.sandboxSetup = sandboxSetup;\n        this.iframeSelector = iframeSelector;\n    }\n    /**\n     * Clients handles\n     */\n    SandpackClient.prototype.updateOptions = function (options) {\n        if (!dequal(this.options, options)) {\n            this.options = options;\n            this.updateSandbox();\n        }\n    };\n    SandpackClient.prototype.updateSandbox = function (_sandboxSetup, _isInitializationCompile) {\n        if (_sandboxSetup === void 0) { _sandboxSetup = this.sandboxSetup; }\n        throw Error(\"Method not implemented\");\n    };\n    SandpackClient.prototype.destroy = function () {\n        throw Error(\"Method not implemented\");\n    };\n    /**\n     * Bundler communication\n     */\n    SandpackClient.prototype.dispatch = function (_message) {\n        throw Error(\"Method not implemented\");\n    };\n    SandpackClient.prototype.listen = function (_listener) {\n        throw Error(\"Method not implemented\");\n    };\n    return SandpackClient;\n}());\n\nexport { SandpackClient as S };\n","import { invariant } from 'outvariant';\nimport { c as createError } from './types-36e5ec0d.mjs';\n\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter() {\n        this.listeners = {};\n        this.listenersCount = 0;\n        this.channelId = Math.floor(Math.random() * 1000000);\n        this.listeners = [];\n    }\n    EventEmitter.prototype.cleanup = function () {\n        this.listeners = {};\n        this.listenersCount = 0;\n    };\n    EventEmitter.prototype.dispatch = function (message) {\n        Object.values(this.listeners).forEach(function (listener) { return listener(message); });\n    };\n    EventEmitter.prototype.listener = function (listener) {\n        var _this = this;\n        if (typeof listener !== \"function\") {\n            return function () {\n                return;\n            };\n        }\n        var listenerId = this.listenersCount;\n        this.listeners[listenerId] = listener;\n        this.listenersCount++;\n        return function () {\n            delete _this.listeners[listenerId];\n        };\n    };\n    return EventEmitter;\n}());\n\nfunction isCommand(char) {\n    return /[a-zA-Z.]/.test(char);\n}\nfunction isAlpha(char) {\n    return /[a-zA-Z]/.test(char);\n}\nfunction isWhitespace(char) {\n    return /\\s/.test(char);\n}\nfunction isOperator(char) {\n    return /[&|]/.test(char);\n}\nfunction isArgument(char) {\n    return /-/.test(char);\n}\nfunction isString(char) {\n    return /[\"']/.test(char);\n}\nfunction isEnvVar(char) {\n    return isAlpha(char) && char === char.toUpperCase();\n}\nvar TokenType;\n(function (TokenType) {\n    TokenType[\"OR\"] = \"OR\";\n    TokenType[\"AND\"] = \"AND\";\n    TokenType[\"PIPE\"] = \"PIPE\";\n    TokenType[\"Command\"] = \"Command\";\n    TokenType[\"Argument\"] = \"Argument\";\n    TokenType[\"String\"] = \"String\";\n    TokenType[\"EnvVar\"] = \"EnvVar\";\n})(TokenType || (TokenType = {}));\nvar operators = new Map([\n    [\"&&\", { type: TokenType.AND }],\n    [\"||\", { type: TokenType.OR }],\n    [\"|\", { type: TokenType.PIPE }],\n    [\"-\", { type: TokenType.Argument }],\n]);\nfunction tokenize(input) {\n    var current = 0;\n    var tokens = [];\n    function parseCommand() {\n        var value = \"\";\n        while (isCommand(input[current]) && current < input.length) {\n            value += input[current];\n            current++;\n        }\n        return { type: TokenType.Command, value: value };\n    }\n    function parseOperator() {\n        var value = \"\";\n        while (isOperator(input[current]) && current < input.length) {\n            value += input[current];\n            current++;\n        }\n        return operators.get(value);\n    }\n    function parseArgument() {\n        var value = \"\";\n        while ((isArgument(input[current]) || isAlpha(input[current])) &&\n            current < input.length) {\n            value += input[current];\n            current++;\n        }\n        return { type: TokenType.Argument, value: value };\n    }\n    function parseString() {\n        var openCloseQuote = input[current];\n        var value = input[current];\n        current++;\n        while (input[current] !== openCloseQuote && current < input.length) {\n            value += input[current];\n            current++;\n        }\n        value += input[current];\n        current++;\n        return { type: TokenType.String, value: value };\n    }\n    function parseEnvVars() {\n        var value = {};\n        var parseSingleEnv = function () {\n            var key = \"\";\n            var pair = \"\";\n            while (input[current] !== \"=\" && current < input.length) {\n                key += input[current];\n                current++;\n            }\n            // Skip equal\n            if (input[current] === \"=\") {\n                current++;\n            }\n            while (input[current] !== \" \" && current < input.length) {\n                pair += input[current];\n                current++;\n            }\n            value[key] = pair;\n        };\n        while (isEnvVar(input[current]) && current < input.length) {\n            parseSingleEnv();\n            current++;\n        }\n        return { type: TokenType.EnvVar, value: value };\n    }\n    while (current < input.length) {\n        var currentChar = input[current];\n        if (isWhitespace(currentChar)) {\n            current++;\n            continue;\n        }\n        switch (true) {\n            case isEnvVar(currentChar):\n                tokens.push(parseEnvVars());\n                break;\n            case isCommand(currentChar):\n                tokens.push(parseCommand());\n                break;\n            case isOperator(currentChar):\n                tokens.push(parseOperator());\n                break;\n            case isArgument(currentChar):\n                tokens.push(parseArgument());\n                break;\n            case isString(currentChar):\n                tokens.push(parseString());\n                break;\n            default:\n                throw new Error(\"Unknown character: \" + currentChar);\n        }\n    }\n    return tokens;\n}\n\nvar counter = 0;\nfunction generateRandomId() {\n    var now = Date.now();\n    var randomNumber = Math.round(Math.random() * 10000);\n    var count = (counter += 1);\n    return (+(\"\" + now + randomNumber + count)).toString(16);\n}\nvar writeBuffer = function (content) {\n    if (typeof content === \"string\") {\n        return new TextEncoder().encode(content);\n    }\n    else {\n        return content;\n    }\n};\nvar readBuffer = function (content) {\n    if (typeof content === \"string\") {\n        return content;\n    }\n    else {\n        return new TextDecoder().decode(content);\n    }\n};\nvar fromBundlerFilesToFS = function (files) {\n    return Object.entries(files).reduce(function (acc, _a) {\n        var key = _a[0], value = _a[1];\n        acc[key] = writeBuffer(value.code);\n        return acc;\n    }, {});\n};\n/**\n * Figure out which script it must run to start a server\n */\nvar findStartScriptPackageJson = function (packageJson) {\n    var scripts = {};\n    // TODO: support postinstall\n    var possibleKeys = [\"dev\", \"start\"];\n    try {\n        scripts = JSON.parse(packageJson).scripts;\n    }\n    catch (e) {\n        throw createError(\"Could not parse package.json file: \" + e.message);\n    }\n    invariant(scripts, \"Failed to start. Please provide a `start` or `dev` script on the package.json\");\n    var _loop_1 = function (index) {\n        if (possibleKeys[index] in scripts) {\n            var script = possibleKeys[index];\n            var candidate = scripts[script];\n            var env_1 = {};\n            var command_1 = \"\";\n            var args_1 = [];\n            tokenize(candidate).forEach(function (item) {\n                var commandNotFoundYet = command_1 === \"\";\n                if (item.type === TokenType.EnvVar) {\n                    env_1 = item.value;\n                }\n                if (item.type === TokenType.Command && commandNotFoundYet) {\n                    command_1 = item.value;\n                }\n                if (item.type === TokenType.Argument ||\n                    (!commandNotFoundYet && item.type === TokenType.Command)) {\n                    args_1.push(item.value);\n                }\n                // TODO: support TokenType.AND, TokenType.OR, TokenType.PIPE\n            });\n            return { value: [command_1, args_1, { env: env_1 }] };\n        }\n    };\n    for (var index = 0; index < possibleKeys.length; index++) {\n        var state_1 = _loop_1(index);\n        if (typeof state_1 === \"object\")\n            return state_1.value;\n    }\n    throw createError(\"Failed to start. Please provide a `start` or `dev` script on the package.json\");\n};\nvar getMessageFromError = function (error) {\n    if (typeof error === \"string\")\n        return error;\n    if (typeof error === \"object\" && \"message\" in error) {\n        return error.message;\n    }\n    return createError(\"The server could not be reached. Make sure that the node script is running and that a port has been started.\");\n};\n\nexport { EventEmitter as E, getMessageFromError as a, findStartScriptPackageJson as b, fromBundlerFilesToFS as f, generateRandomId as g, readBuffer as r, writeBuffer as w };\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n  return fn;\n}","export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}","import classApplyDescriptorGet from \"./classApplyDescriptorGet.js\";\nimport classExtractFieldDescriptor from \"./classExtractFieldDescriptor.js\";\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}","import classApplyDescriptorSet from \"./classApplyDescriptorSet.js\";\nimport classExtractFieldDescriptor from \"./classExtractFieldDescriptor.js\";\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/pad.js\nvar require_pad = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/pad.js\"(exports, module) {\n    module.exports = function pad(num, size) {\n      var s = \"000000000\" + num;\n      return s.substr(s.length - size);\n    };\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/fingerprint.browser.js\nvar require_fingerprint_browser = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/fingerprint.browser.js\"(exports, module) {\n    var pad = require_pad();\n    var env = typeof window === \"object\" ? window : self;\n    var globalCount = Object.keys(env).length;\n    var mimeTypesLength = navigator.mimeTypes ? navigator.mimeTypes.length : 0;\n    var clientId = pad((mimeTypesLength + navigator.userAgent.length).toString(36) + globalCount.toString(36), 4);\n    module.exports = function fingerprint() {\n      return clientId;\n    };\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/getRandomValue.browser.js\nvar require_getRandomValue_browser = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/getRandomValue.browser.js\"(exports, module) {\n    var getRandomValue;\n    var crypto = typeof window !== \"undefined\" && (window.crypto || window.msCrypto) || typeof self !== \"undefined\" && self.crypto;\n    if (crypto) {\n      lim = Math.pow(2, 32) - 1;\n      getRandomValue = function() {\n        return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0] / lim);\n      };\n    } else {\n      getRandomValue = Math.random;\n    }\n    var lim;\n    module.exports = getRandomValue;\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/index.js\nvar require_cuid = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/index.js\"(exports, module) {\n    var fingerprint = require_fingerprint_browser();\n    var pad = require_pad();\n    var getRandomValue = require_getRandomValue_browser();\n    var c = 0;\n    var blockSize = 4;\n    var base = 36;\n    var discreteValues = Math.pow(base, blockSize);\n    function randomBlock() {\n      return pad((getRandomValue() * discreteValues << 0).toString(base), blockSize);\n    }\n    function safeCounter() {\n      c = c < discreteValues ? c : 0;\n      c++;\n      return c - 1;\n    }\n    function cuid3() {\n      var letter = \"c\", timestamp = new Date().getTime().toString(base), counter = pad(safeCounter().toString(base), blockSize), print = fingerprint(), random = randomBlock() + randomBlock();\n      return letter + timestamp + counter + print + random;\n    }\n    cuid3.slug = function slug() {\n      var date = new Date().getTime().toString(36), counter = safeCounter().toString(36).slice(-4), print = fingerprint().slice(0, 1) + fingerprint().slice(-1), random = randomBlock().slice(-2);\n      return date.slice(-2) + counter + print + random;\n    };\n    cuid3.isCuid = function isCuid(stringToCheck) {\n      if (typeof stringToCheck !== \"string\")\n        return false;\n      if (stringToCheck.startsWith(\"c\"))\n        return true;\n      return false;\n    };\n    cuid3.isSlug = function isSlug(stringToCheck) {\n      if (typeof stringToCheck !== \"string\")\n        return false;\n      var stringLength = stringToCheck.length;\n      if (stringLength >= 7 && stringLength <= 10)\n        return true;\n      return false;\n    };\n    cuid3.fingerprint = fingerprint;\n    module.exports = cuid3;\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/createDeferredExecutor.js\nvar require_createDeferredExecutor = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/createDeferredExecutor.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.createDeferredExecutor = void 0;\n    function createDeferredExecutor() {\n      const executor = (resolve, reject) => {\n        executor.state = \"pending\";\n        executor.resolve = (data) => {\n          if (executor.state !== \"pending\") {\n            return;\n          }\n          executor.result = data;\n          const onFulfilled = (value) => {\n            executor.state = \"fulfilled\";\n            return value;\n          };\n          return resolve(data instanceof Promise ? data : Promise.resolve(data).then(onFulfilled));\n        };\n        executor.reject = (reason) => {\n          if (executor.state !== \"pending\") {\n            return;\n          }\n          queueMicrotask(() => {\n            executor.state = \"rejected\";\n          });\n          return reject(executor.rejectionReason = reason);\n        };\n      };\n      return executor;\n    }\n    exports.createDeferredExecutor = createDeferredExecutor;\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/DeferredPromise.js\nvar require_DeferredPromise = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/DeferredPromise.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.DeferredPromise = void 0;\n    var createDeferredExecutor_1 = require_createDeferredExecutor();\n    var DeferredPromise4 = class extends Promise {\n      #executor;\n      resolve;\n      reject;\n      constructor(executor = null) {\n        const deferredExecutor = (0, createDeferredExecutor_1.createDeferredExecutor)();\n        super((originalResolve, originalReject) => {\n          deferredExecutor(originalResolve, originalReject);\n          executor?.(deferredExecutor.resolve, deferredExecutor.reject);\n        });\n        this.#executor = deferredExecutor;\n        this.resolve = this.#executor.resolve;\n        this.reject = this.#executor.reject;\n      }\n      get state() {\n        return this.#executor.state;\n      }\n      get rejectionReason() {\n        return this.#executor.rejectionReason;\n      }\n      then(onFulfilled, onRejected) {\n        return this.#decorate(super.then(onFulfilled, onRejected));\n      }\n      catch(onRejected) {\n        return this.#decorate(super.catch(onRejected));\n      }\n      finally(onfinally) {\n        return this.#decorate(super.finally(onfinally));\n      }\n      #decorate(promise) {\n        return Object.defineProperties(promise, {\n          resolve: { configurable: true, value: this.resolve },\n          reject: { configurable: true, value: this.reject }\n        });\n      }\n    };\n    exports.DeferredPromise = DeferredPromise4;\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/index.js\nvar require_build = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/index.js\"(exports) {\n    \"use strict\";\n    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      var desc = Object.getOwnPropertyDescriptor(m, k);\n      if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = { enumerable: true, get: function() {\n          return m[k];\n        } };\n      }\n      Object.defineProperty(o, k2, desc);\n    } : function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      o[k2] = m[k];\n    });\n    var __exportStar = exports && exports.__exportStar || function(m, exports2) {\n      for (var p in m)\n        if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports2, p))\n          __createBinding(exports2, m, p);\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    __exportStar(require_createDeferredExecutor(), exports);\n    __exportStar(require_DeferredPromise(), exports);\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/MemoryLeakError.js\nvar require_MemoryLeakError = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/MemoryLeakError.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.MemoryLeakError = void 0;\n    var MemoryLeakError = class extends Error {\n      emitter;\n      type;\n      count;\n      constructor(emitter, type, count) {\n        super(`Possible EventEmitter memory leak detected. ${count} ${type.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`);\n        this.emitter = emitter;\n        this.type = type;\n        this.count = count;\n        this.name = \"MaxListenersExceededWarning\";\n      }\n    };\n    exports.MemoryLeakError = MemoryLeakError;\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/Emitter.js\nvar require_Emitter = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/Emitter.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.Emitter = void 0;\n    var MemoryLeakError_1 = require_MemoryLeakError();\n    var _events, _maxListeners, _hasWarnedAboutPotentialMemortyLeak, _getListeners, getListeners_fn, _removeListener, removeListener_fn, _wrapOnceListener, wrapOnceListener_fn, _internalEmit, internalEmit_fn;\n    var _Emitter = class {\n      constructor() {\n        __privateAdd(this, _getListeners);\n        __privateAdd(this, _removeListener);\n        __privateAdd(this, _wrapOnceListener);\n        __privateAdd(this, _internalEmit);\n        __privateAdd(this, _events, void 0);\n        __privateAdd(this, _maxListeners, void 0);\n        __privateAdd(this, _hasWarnedAboutPotentialMemortyLeak, void 0);\n        __privateSet(this, _events, /* @__PURE__ */ new Map());\n        __privateSet(this, _maxListeners, _Emitter.defaultMaxListeners);\n        __privateSet(this, _hasWarnedAboutPotentialMemortyLeak, false);\n      }\n      static listenerCount(emitter, eventName) {\n        return emitter.listenerCount(eventName);\n      }\n      setMaxListeners(maxListeners) {\n        __privateSet(this, _maxListeners, maxListeners);\n        return this;\n      }\n      getMaxListeners() {\n        return __privateGet(this, _maxListeners);\n      }\n      eventNames() {\n        return Array.from(__privateGet(this, _events).keys());\n      }\n      emit(eventName, ...data) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        listeners.forEach((listener) => {\n          listener.apply(this, data);\n        });\n        return listeners.length > 0;\n      }\n      addListener(eventName, listener) {\n        __privateMethod(this, _internalEmit, internalEmit_fn).call(this, \"newListener\", eventName, listener);\n        const nextListeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName).concat(listener);\n        __privateGet(this, _events).set(eventName, nextListeners);\n        if (__privateGet(this, _maxListeners) > 0 && this.listenerCount(eventName) > __privateGet(this, _maxListeners) && !__privateGet(this, _hasWarnedAboutPotentialMemortyLeak)) {\n          __privateSet(this, _hasWarnedAboutPotentialMemortyLeak, true);\n          const memoryLeakWarning = new MemoryLeakError_1.MemoryLeakError(this, eventName, this.listenerCount(eventName));\n          console.warn(memoryLeakWarning);\n        }\n        return this;\n      }\n      on(eventName, listener) {\n        return this.addListener(eventName, listener);\n      }\n      once(eventName, listener) {\n        return this.addListener(eventName, __privateMethod(this, _wrapOnceListener, wrapOnceListener_fn).call(this, eventName, listener));\n      }\n      prependListener(eventName, listener) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        if (listeners.length > 0) {\n          const nextListeners = [listener].concat(listeners);\n          __privateGet(this, _events).set(eventName, nextListeners);\n        } else {\n          __privateGet(this, _events).set(eventName, listeners.concat(listener));\n        }\n        return this;\n      }\n      prependOnceListener(eventName, listener) {\n        return this.prependListener(eventName, __privateMethod(this, _wrapOnceListener, wrapOnceListener_fn).call(this, eventName, listener));\n      }\n      removeListener(eventName, listener) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        if (listeners.length > 0) {\n          __privateMethod(this, _removeListener, removeListener_fn).call(this, listeners, listener);\n          __privateGet(this, _events).set(eventName, listeners);\n          __privateMethod(this, _internalEmit, internalEmit_fn).call(this, \"removeListener\", eventName, listener);\n        }\n        return this;\n      }\n      off(eventName, listener) {\n        return this.removeListener(eventName, listener);\n      }\n      removeAllListeners(eventName) {\n        if (eventName) {\n          __privateGet(this, _events).delete(eventName);\n        } else {\n          __privateGet(this, _events).clear();\n        }\n        return this;\n      }\n      listeners(eventName) {\n        return Array.from(__privateMethod(this, _getListeners, getListeners_fn).call(this, eventName));\n      }\n      listenerCount(eventName) {\n        return __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName).length;\n      }\n      rawListeners(eventName) {\n        return this.listeners(eventName);\n      }\n    };\n    var Emitter2 = _Emitter;\n    _events = new WeakMap();\n    _maxListeners = new WeakMap();\n    _hasWarnedAboutPotentialMemortyLeak = new WeakMap();\n    _getListeners = new WeakSet();\n    getListeners_fn = function(eventName) {\n      return __privateGet(this, _events).get(eventName) || [];\n    };\n    _removeListener = new WeakSet();\n    removeListener_fn = function(listeners, listener) {\n      const index = listeners.indexOf(listener);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n      return [];\n    };\n    _wrapOnceListener = new WeakSet();\n    wrapOnceListener_fn = function(eventName, listener) {\n      const onceListener = (...data) => {\n        this.removeListener(eventName, onceListener);\n        listener.apply(this, data);\n      };\n      return onceListener;\n    };\n    _internalEmit = new WeakSet();\n    internalEmit_fn = function(internalEventName, eventName, listener) {\n      this.emit(\n        internalEventName,\n        ...[eventName, listener]\n      );\n    };\n    __publicField(Emitter2, \"defaultMaxListeners\", 10);\n    exports.Emitter = Emitter2;\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/index.js\nvar require_lib = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/index.js\"(exports) {\n    \"use strict\";\n    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      var desc = Object.getOwnPropertyDescriptor(m, k);\n      if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = { enumerable: true, get: function() {\n          return m[k];\n        } };\n      }\n      Object.defineProperty(o, k2, desc);\n    } : function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      o[k2] = m[k];\n    });\n    var __exportStar = exports && exports.__exportStar || function(m, exports2) {\n      for (var p in m)\n        if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports2, p))\n          __createBinding(exports2, m, p);\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    __exportStar(require_Emitter(), exports);\n    __exportStar(require_MemoryLeakError(), exports);\n  }\n});\n\n// src/messages.ts\nvar import_cuid = __toESM(require_cuid());\n\n// ../../node_modules/.pnpm/outvariant@1.4.0/node_modules/outvariant/lib/index.mjs\nvar POSITIONALS_EXP = /(%?)(%([sdjo]))/g;\nfunction serializePositional(positional, flag) {\n  switch (flag) {\n    case \"s\":\n      return positional;\n    case \"d\":\n    case \"i\":\n      return Number(positional);\n    case \"j\":\n      return JSON.stringify(positional);\n    case \"o\": {\n      if (typeof positional === \"string\") {\n        return positional;\n      }\n      const json = JSON.stringify(positional);\n      if (json === \"{}\" || json === \"[]\" || /^\\[object .+?\\]$/.test(json)) {\n        return positional;\n      }\n      return json;\n    }\n  }\n}\nfunction format(message, ...positionals) {\n  if (positionals.length === 0) {\n    return message;\n  }\n  let positionalIndex = 0;\n  let formattedMessage = message.replace(\n    POSITIONALS_EXP,\n    (match, isEscaped, _, flag) => {\n      const positional = positionals[positionalIndex];\n      const value = serializePositional(positional, flag);\n      if (!isEscaped) {\n        positionalIndex++;\n        return value;\n      }\n      return match;\n    }\n  );\n  if (positionalIndex < positionals.length) {\n    formattedMessage += ` ${positionals.slice(positionalIndex).join(\" \")}`;\n  }\n  formattedMessage = formattedMessage.replace(/%{2,2}/g, \"%\");\n  return formattedMessage;\n}\nvar STACK_FRAMES_TO_IGNORE = 2;\nfunction cleanErrorStack(error) {\n  if (!error.stack) {\n    return;\n  }\n  const nextStack = error.stack.split(\"\\n\");\n  nextStack.splice(1, STACK_FRAMES_TO_IGNORE);\n  error.stack = nextStack.join(\"\\n\");\n}\nvar InvariantError = class extends Error {\n  constructor(message, ...positionals) {\n    super(message);\n    this.message = message;\n    this.name = \"Invariant Violation\";\n    this.message = format(message, ...positionals);\n    cleanErrorStack(this);\n  }\n};\nvar invariant = (predicate, message, ...positionals) => {\n  if (!predicate) {\n    throw new InvariantError(message, ...positionals);\n  }\n};\ninvariant.as = (ErrorConstructor, predicate, message, ...positionals) => {\n  if (!predicate) {\n    const isConstructor = ErrorConstructor.prototype.name != null;\n    const error = isConstructor ? new ErrorConstructor(format(message, positionals)) : ErrorConstructor(format(message, positionals));\n    throw error;\n  }\n};\n\n// src/messages.ts\nvar import_deferred_promise = __toESM(require_build());\n\n// src/logger.ts\nvar FLAG = window.localStorage[\"CSB_EMULATOR_DEBUG\"];\nvar DEFAULT = \"\\x1B[0m\";\nvar GREEN = \"\\x1B[32;1m\";\nvar RED = \"\\x1B[31m\";\nvar BLUE = \"\\x1B[34m\";\nvar YELLOW = \"\\x1B[33;1m\";\nvar MAGENTA = \"\\x1B[35;1m\";\nvar CYAN = \"\\x1B[36;1m\";\nvar COLOR_SCOPE = {\n  preview: YELLOW,\n  emulator: MAGENTA,\n  runtime: CYAN,\n  bridge: BLUE,\n  \"runtime:worker\": CYAN\n};\nfunction createDebug(scope) {\n  return function debug3(message, ...data) {\n    if (FLAG === \"true\") {\n      const direction = () => {\n        if (message.includes(\"sender\"))\n          return `${GREEN}sender`;\n        if (message.includes(\"receiver\"))\n          return `${RED}receiver`;\n        return \"\";\n      };\n      const cleanMessage = message.replace(/\\[.+\\]:/, \"\");\n      console.debug(`${COLOR_SCOPE[scope]}${scope}:${direction()}${DEFAULT}:${cleanMessage}`, ...data);\n    }\n  };\n}\n\n// src/messages.ts\nvar debug = createDebug(\"emulator\");\nvar MessageReceiver = class {\n  emitter;\n  senderPort = null;\n  constructor() {\n    this.emitter = new EventTarget();\n    this.waitForHandshake();\n  }\n  waitForHandshake() {\n    const handshakePromise = new import_deferred_promise.DeferredPromise();\n    const handshakeListener = (message) => {\n      const { data } = message;\n      debug(\"[message-receiver]: incoming\", message);\n      if (data.type === \"internal/handshake\") {\n        invariant(\n          message.ports.length > 0,\n          \"Failed to confirm a MessageReceiver handshake: received event has no ports\"\n        );\n        this.senderPort = message.ports[0];\n        this.addMessageListener();\n        debug(\"[message-receiver]: handshake received!\", this.senderPort);\n        this.send(\"internal/handshake/done\");\n        debug(\"[message-receiver]: finish handshake\");\n      }\n    };\n    window.addEventListener(\"message\", handshakeListener);\n    handshakePromise.then(() => {\n      window.removeEventListener(\"message\", handshakeListener);\n    });\n    window.parent.postMessage({ type: \"internal/ready\" }, \"*\");\n    return handshakePromise;\n  }\n  addMessageListener() {\n    invariant(\n      this.senderPort,\n      \"[MessageReceiver] Failed to add a message listener: sender port is not defined. Did you forget to await a handshake?\"\n    );\n    this.senderPort.onmessage = (evt) => {\n      const data = evt.data;\n      if (data.type == null) {\n        return;\n      }\n      this.emitter.dispatchEvent(\n        new MessageEvent(data.type, {\n          data: data.payload\n        })\n      );\n    };\n  }\n  on(event, listener, options) {\n    this.emitter.addEventListener(\n      event,\n      async (message) => {\n        if (!(message instanceof MessageEvent)) {\n          return;\n        }\n        const { operationId, payload } = message.data;\n        try {\n          const listenerPayload = await listener(payload);\n          this.send(\"internal/operation/done\", { operationId, listenerPayload });\n        } catch (error) {\n          if (error instanceof Error) {\n            this.send(\"internal/operation/failed\", { operationId, error });\n          }\n        }\n      },\n      options\n    );\n  }\n  send(event, ...data) {\n    invariant(\n      this.senderPort,\n      '[MessageReceiver] Failed to send a message \"%j\": sender port is not defined. Did you forget to await a handshake?',\n      event\n    );\n    const payload = data[0] || {};\n    debug('[message-receiver]: send \"%s\"', event, payload);\n    this.senderPort.postMessage({ type: event, payload });\n  }\n};\nvar MessageSender = class {\n  constructor(target) {\n    this.target = target;\n    this.emitter = new EventTarget();\n    this.channel = new MessageChannel();\n    this.receiverPort = this.channel.port1;\n    const receiverReadyPromise = new import_deferred_promise.DeferredPromise();\n    const handshakeListener = (message) => {\n      if (message.data.type === \"internal/ready\") {\n        debug(\"[message-sender]: runtime is ready\");\n        receiverReadyPromise.resolve();\n      }\n    };\n    window.addEventListener(\"message\", handshakeListener);\n    receiverReadyPromise.then(() => {\n      window.removeEventListener(\"message\", handshakeListener);\n    });\n    this.receiverReadyPromise = receiverReadyPromise;\n    this.receiverPort.onmessage = (evt) => {\n      const data = evt.data;\n      if (data.type != null) {\n        debug('[message-sender]: emitting \"%s\" event...', data.type, data.payload);\n        this.emitter.dispatchEvent(new MessageEvent(data.type, { data: data.payload }));\n      }\n    };\n  }\n  emitter;\n  channel;\n  receiverPort;\n  receiverReadyPromise;\n  async handshake() {\n    const handshakePromise = new import_deferred_promise.DeferredPromise();\n    await this.receiverReadyPromise;\n    debug(\"[message-sender]: sending handshake\");\n    this.target.postMessage(\n      {\n        type: \"internal/handshake\"\n      },\n      \"*\",\n      [this.channel.port2]\n    );\n    this.on(\"internal/handshake/done\", () => {\n      handshakePromise.resolve();\n      clearTimeout(rejectionTimeout);\n    });\n    const rejectionTimeout = setTimeout(() => {\n      handshakePromise.reject(new Error(\"MessageSender: Handshake timeout\"));\n    }, 5e3);\n    return handshakePromise;\n  }\n  on(event, listener, options) {\n    debug('[message-sender]: add listener \"%s\"', event);\n    this.emitter.addEventListener(\n      event,\n      (message) => {\n        if (message instanceof MessageEvent) {\n          listener(message);\n        }\n      },\n      options\n    );\n  }\n  off(event, listener, options) {\n    this.emitter.removeEventListener(event, listener, options);\n  }\n  async send(event, ...data) {\n    const operationPromise = new import_deferred_promise.DeferredPromise();\n    const operationId = (0, import_cuid.default)();\n    const payload = data[0] || {};\n    debug('[message-sender]: send \"%s\" (%s)', event, operationId, payload);\n    this.receiverPort.postMessage({ type: event, payload: { operationId, payload } });\n    debug('[message-sender]: adding done listener for \"%s\" (%s)', event, operationId);\n    const handleOperationDone = (doneEvent) => {\n      const { data: data2 } = doneEvent;\n      if (data2.operationId === operationId) {\n        const listenerPayload = data2.listenerPayload || {};\n        debug('[message-sender]: resolving \"%s (%s) promise!', event, operationId);\n        operationPromise.resolve({\n          ...listenerPayload,\n          operationId: data2.operationId\n        });\n      }\n    };\n    const handleOperationFailed = (failEvent) => {\n      const { data: data2 } = failEvent;\n      if (data2.operationId === operationId) {\n        debug('[message-sender]: rejecting \"%s (%s) promise!', event, operationId);\n        operationPromise.reject(data2.error);\n      }\n    };\n    this.on(\"internal/operation/done\", handleOperationDone);\n    this.on(\"internal/operation/failed\", handleOperationFailed);\n    return operationPromise.finally(() => {\n      this.emitter.removeEventListener(\"internal/operation/done\", handleOperationDone);\n      this.emitter.removeEventListener(\"internal/operation/failed\", handleOperationFailed);\n    });\n  }\n};\n\n// src/Nodebox.ts\nvar import_deferred_promise3 = __toESM(require_build());\n\n// src/modules/fs.ts\nvar import_cuid2 = __toESM(require_cuid());\nvar FileSystemApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  async init(files) {\n    await this.channel.send(\"fs/init\", { files });\n  }\n  async readFile(path, encoding) {\n    const response = await this.channel.send(\"fs/readFile\", { path, encoding }).catch((error) => {\n      throw new Error(format('Failed to read file at path \"%s\"', path), { cause: error });\n    });\n    if (!response) {\n      throw new Error(\"File not found\");\n    }\n    return response.data;\n  }\n  async writeFile(path, content, options) {\n    let encoding = void 0;\n    let recursive = false;\n    if (typeof options === \"object\") {\n      encoding = options.encoding;\n      recursive = !!options.recursive;\n    } else if (typeof options === \"string\") {\n      encoding = options;\n    }\n    await this.channel.send(\"fs/writeFile\", { path, content, encoding, recursive }).catch((error) => {\n      throw new Error(format('Failed to write file at path \"%s\"', path), { cause: error });\n    });\n  }\n  async readdir(path) {\n    const response = await this.channel.send(\"fs/readdir\", { path }).catch((error) => {\n      throw new Error(format('Failed to read directory at path \"%s\"', path), { cause: error });\n    });\n    if (!response) {\n      throw new Error(\"Directory not found\");\n    }\n    return response.data;\n  }\n  async mkdir(path, options) {\n    const recursive = !!options?.recursive;\n    await this.channel.send(\"fs/mkdir\", { path, recursive }).catch((error) => {\n      throw new Error(format('Failed to make directory at path \"%s\"', path), { cause: error });\n    });\n  }\n  async stat(path) {\n    const response = await this.channel.send(\"fs/stat\", { path }).catch((error) => {\n      throw new Error(format('Failed to stat file at path \"%s\"', path), { cause: error });\n    });\n    if (!response) {\n      throw new Error(\"File not found\");\n    }\n    return response.data;\n  }\n  async rm(path, options) {\n    const { force, recursive } = options || {};\n    await this.channel.send(\"fs/rm\", { path, force, recursive }).catch((error) => {\n      throw new Error(format('Failed to remove file at path \"%s\"', path), { cause: error });\n    });\n  }\n  async watch(includes, excludes, listener) {\n    const watcherId = (0, import_cuid2.default)();\n    await this.channel.send(\"fs/watch\", { watcherId, includes, excludes });\n    this.channel.on(\"fs/watch-event\", ({ data }) => {\n      if (data.watcherId === watcherId && listener) {\n        const evt = { ...data };\n        delete evt.watcherId;\n        listener(evt);\n      }\n    });\n    return {\n      dispose: () => this.channel.send(\"fs/unwatch\", { watcherId })\n    };\n  }\n};\n\n// src/modules/shell.ts\nvar import_strict_event_emitter = __toESM(require_lib());\nvar ShellApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  create() {\n    return new ShellProcess(this.channel);\n  }\n};\nvar ShellProcess = class {\n  constructor(channel) {\n    this.channel = channel;\n    this.state = \"running\";\n    this.stdout = new import_strict_event_emitter.Emitter();\n    this.stderr = new import_strict_event_emitter.Emitter();\n    this.stdin = {\n      write: (data) => {\n        if (!this.id) {\n          throw new Error(\"Failed to write to stdin, no process is currently running\");\n        }\n        return this.channel.send(\"shell/stdin\", { data, workerId: this.id });\n      }\n    };\n    this.forwardStdEvents();\n  }\n  id;\n  state;\n  stdout;\n  stderr;\n  stdin;\n  forwardStdEvents() {\n    this.channel.on(\"worker/tty\", (message) => {\n      const { data } = message;\n      if (data.workerId !== this.id) {\n        return;\n      }\n      switch (data.payload.type) {\n        case \"out\": {\n          this.stdout.emit(\"data\", data.payload.data);\n          break;\n        }\n        case \"err\": {\n          this.stderr.emit(\"data\", data.payload.data);\n          break;\n        }\n      }\n    });\n  }\n  async runCommand(command, args, options = {}) {\n    invariant(!this.id, 'Failed to run \"runCommand\" on a ShellProcess: there is already a process running.');\n    const shellInfo = await this.channel.send(\"shell/runCommand\", { command, args, options });\n    invariant(shellInfo, 'Failed to run \"runCommand\" on a ShellProcess: was not able to retrieve a running process.');\n    this.id = shellInfo.id;\n    this.state = \"running\";\n    return shellInfo;\n  }\n  async on(message, listener) {\n    switch (message) {\n      case \"progress\": {\n        this.channel.on(\"worker/progress\", ({ data }) => {\n          listener(data.status);\n        });\n        return;\n      }\n      case \"exit\": {\n        this.channel.on(\"worker/exit\", ({ data }) => {\n          if (data.workerId === this.id) {\n            listener(data.exitCode, data.error);\n          }\n        });\n        return;\n      }\n    }\n  }\n  async kill() {\n    invariant(\n      this.id,\n      'Failed to run \"kill\" on a ShellProcess: there is no process running. Did you forget to run it?'\n    );\n    this.state = \"idle\";\n    await this.channel.send(\"shell/exit\", { id: this.id }).catch((error) => {\n      throw new Error(format('Failed to kill shell with ID \"%s\"', this.id), { cause: error });\n    });\n    this.id = void 0;\n  }\n};\n\n// src/modules/preview.ts\nvar import_deferred_promise2 = __toESM(require_build());\nvar TIMEOUT = 2e4;\nvar PreviewApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  async waitFor(payload, predicate, timeout = TIMEOUT) {\n    const readyPromise = new import_deferred_promise2.DeferredPromise();\n    const rejectTimeout = setTimeout(() => {\n      readyPromise.reject();\n    }, timeout);\n    const previewInformation = await this.channel.send(\"preview/get/info\", payload).catch((error) => {\n      readyPromise.reject(\n        new Error(\n          format(\n            'Failed to look up preview information for shell ID \"%s\" (port: %d)',\n            payload.sourceShellId,\n            payload.port\n          )\n        )\n      );\n    });\n    const foundPreview = previewInformation && predicate(previewInformation);\n    if (foundPreview) {\n      readyPromise.resolve({\n        url: previewInformation.url,\n        port: previewInformation.port,\n        sourceShellId: previewInformation.sourceShellId\n      });\n    }\n    this.channel.on(\"preview/port/ready\", ({ data }) => {\n      if (!foundPreview && predicate(data)) {\n        readyPromise.resolve({\n          url: data.url,\n          port: data.port,\n          sourceShellId: data.sourceShellId\n        });\n      }\n    });\n    return readyPromise.finally(() => {\n      clearTimeout(rejectTimeout);\n    });\n  }\n  async getByShellId(sourceShellId, timeout) {\n    return this.waitFor({ sourceShellId }, (data) => data.sourceShellId === sourceShellId, timeout).catch((error) => {\n      throw new Error(format('Failed to get shell by ID \"%s\"', sourceShellId), { cause: error });\n    });\n  }\n  async waitForPort(port, timeout) {\n    return this.waitFor({ port }, (data) => data.port === port, timeout).catch((error) => {\n      throw new Error(format(\"Failed to await port %d\", port), { cause: error });\n    });\n  }\n};\n\n// src/Nodebox.ts\nvar DEFAULT_RUNTIME_URL = \"https://nodebox-runtime.codesandbox.io\";\nvar debug2 = createDebug(\"emulator\");\nvar Nodebox = class {\n  constructor(options) {\n    this.options = options;\n    invariant(\n      this.options.iframe,\n      'Failed to create a Nodebox: expected \"iframe\" argument to be a reference to an <iframe> element but got %j',\n      this.options.iframe\n    );\n    this.url = this.options.runtimeUrl || DEFAULT_RUNTIME_URL;\n    this.isConnected = false;\n  }\n  channel = null;\n  isConnected;\n  url;\n  fileSystemApi = null;\n  shellApi = null;\n  previewApi = null;\n  async connect() {\n    const { iframe, cdnUrl } = this.options;\n    debug2(\"[message-sender]: Connecting to node emulator...\");\n    const connectionPromise = new import_deferred_promise3.DeferredPromise();\n    if (!this.url) {\n      connectionPromise.reject(\n        new Error(\"Nodebox URL is missing. Did you forget to provide it when creating this Nodebox instance?\")\n      );\n    }\n    invariant(\n      iframe.contentWindow,\n      \"Failed to create a MessageChannel with the Nodebox iframe: no content window found\"\n    );\n    this.channel = new MessageSender(iframe.contentWindow);\n    const frameLoadPromise = new import_deferred_promise3.DeferredPromise();\n    iframe.setAttribute(\"src\", this.url);\n    iframe.addEventListener(\n      \"load\",\n      () => {\n        frameLoadPromise.resolve();\n      },\n      { once: true }\n    );\n    iframe.addEventListener(\n      \"error\",\n      (event) => {\n        frameLoadPromise.reject(event.error);\n      },\n      { once: true }\n    );\n    await frameLoadPromise;\n    debug2(\"[message-sender]: IFrame loaded...\");\n    await this.channel.handshake();\n    debug2(\"[message-sender]: Handshake completed...\");\n    this.channel.send(\"connect\", {\n      cdnUrl\n    });\n    this.channel.on(\"runtime/ready\", () => {\n      connectionPromise.resolve();\n    });\n    return connectionPromise.then(() => {\n      debug2(\"[message-sender]: Connected to runtime...\");\n      this.isConnected = true;\n    });\n  }\n  get fs() {\n    invariant(\n      this.isConnected,\n      'Failed to access the File System API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.fileSystemApi) {\n      return this.fileSystemApi;\n    }\n    this.fileSystemApi = new FileSystemApi(this.channel);\n    return this.fileSystemApi;\n  }\n  get shell() {\n    invariant(\n      this.isConnected,\n      'Failed to access the Shell API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.shellApi) {\n      return this.shellApi;\n    }\n    this.shellApi = new ShellApi(this.channel);\n    return this.shellApi;\n  }\n  get preview() {\n    invariant(\n      this.isConnected,\n      'Failed to access the Preview API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.previewApi) {\n      return this.previewApi;\n    }\n    this.previewApi = new PreviewApi(this.channel);\n    return this.previewApi;\n  }\n};\n\n// src/runtime-protocol.types.ts\nvar INJECT_MESSAGE_TYPE = \"INJECT_AND_INVOKE\";\nvar PREVIEW_LOADED_MESSAGE_TYPE = \"PREVIEW_LOADED\";\nexport {\n  INJECT_MESSAGE_TYPE,\n  MessageReceiver,\n  MessageSender,\n  Nodebox,\n  PREVIEW_LOADED_MESSAGE_TYPE\n};\n","import checkPrivateRedeclaration from \"./checkPrivateRedeclaration.js\";\nexport default function _classPrivateMethodInitSpec(obj, privateSet) {\n  checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}","import checkPrivateRedeclaration from \"./checkPrivateRedeclaration.js\";\nexport default function _classPrivateFieldInitSpec(obj, privateMap, value) {\n  checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}","import { _ as __awaiter, a as __generator, n as nullthrows, c as createError, g as __extends, h as __assign } from '../../types-36e5ec0d.mjs';\nimport { INJECT_MESSAGE_TYPE, Nodebox, PREVIEW_LOADED_MESSAGE_TYPE } from '@codesandbox/nodebox';\nimport { S as SandpackClient } from '../../base-80a1f760.mjs';\nimport { f as fromBundlerFilesToFS, r as readBuffer, w as writeBuffer, g as generateRandomId, E as EventEmitter, a as getMessageFromError, b as findStartScriptPackageJson } from '../../client.utils-7a723432.mjs';\nimport 'outvariant';\nimport 'dequal';\n\nfunction loadPreviewIframe(iframe, url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var contentWindow, TIME_OUT, MAX_MANY_TIRES, tries, timeout;\n        return __generator(this, function (_a) {\n            contentWindow = iframe.contentWindow;\n            nullthrows(contentWindow, \"Failed to await preview iframe: no content window found\");\n            TIME_OUT = 90000;\n            MAX_MANY_TIRES = 20;\n            tries = 0;\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    var triesToSetUrl = function () {\n                        var onLoadPage = function () {\n                            clearTimeout(timeout);\n                            tries = MAX_MANY_TIRES;\n                            resolve();\n                            iframe.removeEventListener(\"load\", onLoadPage);\n                        };\n                        if (tries >= MAX_MANY_TIRES) {\n                            reject(createError(\"Could not able to connect to preview.\"));\n                            return;\n                        }\n                        iframe.setAttribute(\"src\", url);\n                        timeout = setTimeout(function () {\n                            triesToSetUrl();\n                            iframe.removeEventListener(\"load\", onLoadPage);\n                        }, TIME_OUT);\n                        tries = tries + 1;\n                        iframe.addEventListener(\"load\", onLoadPage);\n                    };\n                    iframe.addEventListener(\"error\", function () { return reject(new Error(\"Iframe error\")); });\n                    iframe.addEventListener(\"abort\", function () { return reject(new Error(\"Aborted\")); });\n                    triesToSetUrl();\n                })];\n        });\n    });\n}\nvar setPreviewIframeProperties = function (iframe, options) {\n    iframe.style.border = \"0\";\n    iframe.style.width = options.width || \"100%\";\n    iframe.style.height = options.height || \"100%\";\n    iframe.style.overflow = \"hidden\";\n    iframe.allow = \"cross-origin-isolated\";\n};\n\nvar consoleHook = \"var t=\\\"undefined\\\"!=typeof globalThis?globalThis:\\\"undefined\\\"!=typeof window?window:\\\"undefined\\\"!=typeof globalThis?globalThis:\\\"undefined\\\"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,\\\"default\\\")?t.default:t}var e={},n={};!function(t){t.__esModule=!0,t.default=[\\\"log\\\",\\\"debug\\\",\\\"info\\\",\\\"warn\\\",\\\"error\\\",\\\"table\\\",\\\"clear\\\",\\\"time\\\",\\\"timeEnd\\\",\\\"count\\\",\\\"assert\\\",\\\"command\\\",\\\"result\\\"]}(n);var a,o={},i={};(a=i).__esModule=!0,a.default=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+\\\"-\\\"+t()+\\\"-\\\"+t()+\\\"-\\\"+t()+\\\"-\\\"+t()+\\\"-\\\"+Date.now()};var u={},s={__esModule:!0};s.update=s.state=void 0,s.update=function(t){s.state=t};var f={},c={};!function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)};r.__esModule=!0,r.initialState=void 0,r.initialState={timings:{},count:{}};var n=function(){return\\\"undefined\\\"!=typeof performance&&performance.now?performance.now():Date.now()};r.default=function(t,a){var o,i,u;switch(void 0===t&&(t=r.initialState),a.type){case\\\"COUNT\\\":var s=t.count[a.name]||0;return e(e({},t),{count:e(e({},t.count),(o={},o[a.name]=s+1,o))});case\\\"TIME_START\\\":return e(e({},t),{timings:e(e({},t.timings),(i={},i[a.name]={start:n()},i))});case\\\"TIME_END\\\":var f=t.timings[a.name],c=n(),l=c-f.start;return e(e({},t),{timings:e(e({},t.timings),(u={},u[a.name]=e(e({},f),{end:c,time:l}),u))});default:return t}}}(c),function(r){var e=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var n=e(c),a=s;r.default=function(t){a.update(n.default(a.state,t))}}(f);var l={__esModule:!0};l.timeEnd=l.timeStart=l.count=void 0,l.count=function(t){return{type:\\\"COUNT\\\",name:t}},l.timeStart=function(t){return{type:\\\"TIME_START\\\",name:t}},l.timeEnd=function(t){return{type:\\\"TIME_END\\\",name:t}};var d=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};u.__esModule=!0,u.stop=u.start=void 0;var p=s,h=d(f),m=l;u.start=function(t){h.default(m.timeStart(t))},u.stop=function(t){var r=null===p.state||void 0===p.state?void 0:p.state.timings[t];return r&&!r.end?(h.default(m.timeEnd(t)),{method:\\\"log\\\",data:[t+\\\": \\\"+p.state.timings[t].time+\\\"ms\\\"]}):{method:\\\"warn\\\",data:[\\\"Timer '\\\"+t+\\\"' does not exist\\\"]}};var y={},v=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};y.__esModule=!0,y.increment=void 0;var _=s,b=v(f),g=l;y.increment=function(t){return b.default(g.count(t)),{method:\\\"log\\\",data:[t+\\\": \\\"+_.state.count[t]]}};var M={},T=t&&t.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var o=arguments[r],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n};M.__esModule=!0,M.test=void 0,M.test=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return!t&&(0===r.length&&r.push(\\\"console.assert\\\"),{method:\\\"error\\\",data:T([\\\"Assertion failed:\\\"],r)})},function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)},n=t&&t.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),a=t&&t.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,\\\"default\\\",{enumerable:!0,value:r})}:function(t,r){t.default=r}),o=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)\\\"default\\\"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&n(r,t,e);return a(r,t),r},s=t&&t.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var o=arguments[r],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n},f=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var c=f(i),l=o(u),d=o(y),p=o(M);r.default=function(t,r,n){var a=n||c.default();switch(t){case\\\"clear\\\":return{method:t,id:a};case\\\"count\\\":return!!(o=\\\"string\\\"==typeof r[0]?r[0]:\\\"default\\\")&&e(e({},d.increment(o)),{id:a});case\\\"time\\\":case\\\"timeEnd\\\":var o;return!!(o=\\\"string\\\"==typeof r[0]?r[0]:\\\"default\\\")&&(\\\"time\\\"===t?(l.start(o),!1):e(e({},l.stop(o)),{id:a}));case\\\"assert\\\":if(0!==r.length){var i=p.test.apply(p,s([r[0]],r.slice(1)));if(i)return e(e({},i),{id:a})}return!1;case\\\"error\\\":return{method:t,id:a,data:r.map((function(t){try{return t.stack||t}catch(r){return t}}))};default:return{method:t,id:a,data:r}}}}(o);var S={},O={};!function(t){var r;t.__esModule=!0,function(t){t[t.infinity=0]=\\\"infinity\\\",t[t.minusInfinity=1]=\\\"minusInfinity\\\",t[t.minusZero=2]=\\\"minusZero\\\"}(r||(r={})),t.default={type:\\\"Arithmetic\\\",lookup:Number,shouldTransform:function(t,r){return\\\"number\\\"===t&&(r===1/0||r===-1/0||function(t){return 1/t==-1/0}(r))},toSerializable:function(t){return t===1/0?r.infinity:t===-1/0?r.minusInfinity:r.minusZero},fromSerializable:function(t){return t===r.infinity?1/0:t===r.minusInfinity?-1/0:t===r.minusZero?-0:t}}}(O);var w={};!function(t){t.__esModule=!0,t.default={type:\\\"Function\\\",lookup:Function,shouldTransform:function(t,r){return\\\"function\\\"==typeof r},toSerializable:function(t){var r=\\\"\\\";try{r=t.toString().substring(r.indexOf(\\\"{\\\")+1,r.lastIndexOf(\\\"}\\\"))}catch(t){}return{name:t.name,body:r,proto:Object.getPrototypeOf(t).constructor.name}},fromSerializable:function(t){try{var r=function(){};return\\\"string\\\"==typeof t.name&&Object.defineProperty(r,\\\"name\\\",{value:t.name,writable:!1}),\\\"string\\\"==typeof t.body&&Object.defineProperty(r,\\\"body\\\",{value:t.body,writable:!1}),\\\"string\\\"==typeof t.proto&&(r.constructor={name:t.proto}),r}catch(r){return t}}}}(w);var A={};!function(t){var r;function e(t){for(var r={},e=0,n=t.attributes;e<n.length;e++){var a=n[e];r[a.name]=a.value}return r}t.__esModule=!0,t.default={type:\\\"HTMLElement\\\",shouldTransform:function(t,r){return r&&r.children&&\\\"string\\\"==typeof r.innerHTML&&\\\"string\\\"==typeof r.tagName},toSerializable:function(t){return{tagName:t.tagName.toLowerCase(),attributes:e(t),innerHTML:t.innerHTML}},fromSerializable:function(t){try{var e=(r||(r=document.implementation.createHTMLDocument(\\\"sandbox\\\"))).createElement(t.tagName);e.innerHTML=t.innerHTML;for(var n=0,a=Object.keys(t.attributes);n<a.length;n++){var o=a[n];try{e.setAttribute(o,t.attributes[o])}catch(t){}}return e}catch(r){return t}}}}(A);var j={};!function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)};r.__esModule=!0,r.default={type:\\\"Map\\\",shouldTransform:function(t,r){return r&&r.constructor&&\\\"Map\\\"===r.constructor.name},toSerializable:function(t){var r={};return t.forEach((function(t,e){var n=\\\"object\\\"==typeof e?JSON.stringify(e):e;r[n]=t})),{name:\\\"Map\\\",body:r,proto:Object.getPrototypeOf(t).constructor.name}},fromSerializable:function(t){var r=t.body,n=e({},r);return\\\"string\\\"==typeof t.proto&&(n.constructor={name:t.proto}),n}}}(j);var z={};!function(t){t.__esModule=!0;var r=\\\"@t\\\",e=/^#*@(t|r)$/,n=(0,eval)(\\\"this\\\"),a=\\\"function\\\"==typeof ArrayBuffer,o=\\\"function\\\"==typeof Map,i=\\\"function\\\"==typeof Set,u=[\\\"Int8Array\\\",\\\"Uint8Array\\\",\\\"Uint8ClampedArray\\\",\\\"Int16Array\\\",\\\"Uint16Array\\\",\\\"Int32Array\\\",\\\"Uint32Array\\\",\\\"Float32Array\\\",\\\"Float64Array\\\"],s=Array.prototype.slice,f={serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)}},c=function(){function t(t,r){this.references=t,this.transforms=r,this.transformsMap=this._makeTransformsMap(),this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}return t._createRefMark=function(t){var r=Object.create(null);return r[\\\"@r\\\"]=t,r},t.prototype._createCircularCandidate=function(t,r,e){this.circularCandidates.push(t),this.circularCandidatesDescrs.push({parent:r,key:e,refIdx:-1})},t.prototype._applyTransform=function(t,e,n,a){var o=Object.create(null),i=a.toSerializable(t);return\\\"object\\\"==typeof i&&this._createCircularCandidate(t,e,n),o[r]=a.type,o.data=this._handleValue((function(){return i}),e,n),o},t.prototype._handleArray=function(t){for(var r=[],e=function(e){r[e]=n._handleValue((function(){return t[e]}),r,e)},n=this,a=0;a<t.length;a++)e(a);return r},t.prototype._handlePlainObject=function(t){var r,n,a=Object.create(null),o=function(r){if(Reflect.has(t,r)){var n=e.test(r)?\\\"#\\\"+r:r;a[n]=i._handleValue((function(){return t[r]}),a,n)}},i=this;for(var u in t)o(u);var s=null===(n=null===(r=null==t?void 0:t.__proto__)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name;return s&&\\\"Object\\\"!==s&&(a.constructor={name:s}),a},t.prototype._handleObject=function(t,r,e){return this._createCircularCandidate(t,r,e),Array.isArray(t)?this._handleArray(t):this._handlePlainObject(t)},t.prototype._ensureCircularReference=function(r){var e=this.circularCandidates.indexOf(r);if(e>-1){var n=this.circularCandidatesDescrs[e];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),t._createRefMark(n.refIdx)}return null},t.prototype._handleValue=function(t,r,e){try{var n=t(),a=typeof n,o=\\\"object\\\"===a&&null!==n;if(o){var i=this._ensureCircularReference(n);if(i)return i}var u=this._findTransform(a,n);return u?this._applyTransform(n,r,e,u):o?this._handleObject(n,r,e):n}catch(t){try{return this._handleValue((function(){return t instanceof Error?t:new Error(t)}),r,e)}catch(t){return null}}},t.prototype._makeTransformsMap=function(){if(o){var t=new Map;return this.transforms.forEach((function(r){r.lookup&&t.set(r.lookup,r)})),t}},t.prototype._findTransform=function(t,r){if(o&&r&&r.constructor&&(null==(a=this.transformsMap.get(r.constructor))?void 0:a.shouldTransform(t,r)))return a;for(var e=0,n=this.transforms;e<n.length;e++){var a;if((a=n[e]).shouldTransform(t,r))return a}},t.prototype.transform=function(){for(var r=this,e=[this._handleValue((function(){return r.references}),null,null)],n=0,a=this.circularCandidatesDescrs;n<a.length;n++){var o=a[n];o.refIdx>0&&(e[o.refIdx]=o.parent[o.key],o.parent[o.key]=t._createRefMark(o.refIdx))}return e},t}(),l=function(){function t(t,r){this.activeTransformsStack=[],this.visitedRefs=Object.create(null),this.references=t,this.transformMap=r}return t.prototype._handlePlainObject=function(t){var r=Object.create(null);for(var n in\\\"constructor\\\"in t&&(t.constructor&&\\\"string\\\"==typeof t.constructor.name||(t.constructor={name:\\\"Object\\\"})),t)t.hasOwnProperty(n)&&(this._handleValue(t[n],t,n),e.test(n)&&(r[n.substring(1)]=t[n],delete t[n]));for(var a in r)t[a]=r[a]},t.prototype._handleTransformedObject=function(t,e,n){var a=t[r],o=this.transformMap[a];if(!o)throw new Error(\\\"Can't find transform for \\\\\\\"\\\"+a+'\\\" type.');this.activeTransformsStack.push(t),this._handleValue(t.data,t,\\\"data\\\"),this.activeTransformsStack.pop(),e[n]=o.fromSerializable(t.data)},t.prototype._handleCircularSelfRefDuringTransform=function(t,r,e){var n=this.references;Object.defineProperty(r,e,{val:void 0,configurable:!0,enumerable:!0,get:function(){return void 0===this.val&&(this.val=n[t]),this.val},set:function(t){this.val=t}})},t.prototype._handleCircularRef=function(t,r,e){this.activeTransformsStack.includes(this.references[t])?this._handleCircularSelfRefDuringTransform(t,r,e):(this.visitedRefs[t]||(this.visitedRefs[t]=!0,this._handleValue(this.references[t],this.references,t)),r[e]=this.references[t])},t.prototype._handleValue=function(t,e,n){if(\\\"object\\\"==typeof t&&null!==t){var a=t[\\\"@r\\\"];if(void 0!==a)this._handleCircularRef(a,e,n);else if(t[r])this._handleTransformedObject(t,e,n);else if(Array.isArray(t))for(var o=0;o<t.length;o++)this._handleValue(t[o],t,o);else this._handlePlainObject(t)}},t.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]},t}(),d=[{type:\\\"[[NaN]]\\\",shouldTransform:function(t,r){return\\\"number\\\"===t&&isNaN(r)},toSerializable:function(){return\\\"\\\"},fromSerializable:function(){return NaN}},{type:\\\"[[undefined]]\\\",shouldTransform:function(t){return\\\"undefined\\\"===t},toSerializable:function(){return\\\"\\\"},fromSerializable:function(){}},{type:\\\"[[Date]]\\\",lookup:Date,shouldTransform:function(t,r){return r instanceof Date},toSerializable:function(t){return t.getTime()},fromSerializable:function(t){var r=new Date;return r.setTime(t),r}},{type:\\\"[[RegExp]]\\\",lookup:RegExp,shouldTransform:function(t,r){return r instanceof RegExp},toSerializable:function(t){var r={src:t.source,flags:\\\"\\\"};return t.globalThis&&(r.flags+=\\\"g\\\"),t.ignoreCase&&(r.flags+=\\\"i\\\"),t.multiline&&(r.flags+=\\\"m\\\"),r},fromSerializable:function(t){return new RegExp(t.src,t.flags)}},{type:\\\"[[Error]]\\\",lookup:Error,shouldTransform:function(t,r){return r instanceof Error},toSerializable:function(t){var r,e;return t.stack||null===(e=(r=Error).captureStackTrace)||void 0===e||e.call(r,t),{name:t.name,message:t.message,stack:t.stack}},fromSerializable:function(t){var r=new(n[t.name]||Error)(t.message);return r.stack=t.stack,r}},{type:\\\"[[ArrayBuffer]]\\\",lookup:a&&ArrayBuffer,shouldTransform:function(t,r){return a&&r instanceof ArrayBuffer},toSerializable:function(t){var r=new Int8Array(t);return s.call(r)},fromSerializable:function(t){if(a){var r=new ArrayBuffer(t.length);return new Int8Array(r).set(t),r}return t}},{type:\\\"[[TypedArray]]\\\",shouldTransform:function(t,r){if(a)return ArrayBuffer.isView(r)&&!(r instanceof DataView);for(var e=0,o=u;e<o.length;e++){var i=o[e];if(\\\"function\\\"==typeof n[i]&&r instanceof n[i])return!0}return!1},toSerializable:function(t){return{ctorName:t.constructor.name,arr:s.call(t)}},fromSerializable:function(t){return\\\"function\\\"==typeof n[t.ctorName]?new n[t.ctorName](t.arr):t.arr}},{type:\\\"[[Map]]\\\",lookup:o&&Map,shouldTransform:function(t,r){return o&&r instanceof Map},toSerializable:function(t){var r=[];return t.forEach((function(t,e){r.push(e),r.push(t)})),r},fromSerializable:function(t){if(o){for(var r=new Map,e=0;e<t.length;e+=2)r.set(t[e],t[e+1]);return r}for(var n=[],a=0;a<t.length;a+=2)n.push([t[e],t[e+1]]);return n}},{type:\\\"[[Set]]\\\",lookup:i&&Set,shouldTransform:function(t,r){return i&&r instanceof Set},toSerializable:function(t){var r=[];return t.forEach((function(t){r.push(t)})),r},fromSerializable:function(t){if(i){for(var r=new Set,e=0;e<t.length;e++)r.add(t[e]);return r}return t}}],p=function(){function t(t){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=t||f,this.addTransforms(d)}return t.prototype.addTransforms=function(t){for(var r=0,e=t=Array.isArray(t)?t:[t];r<e.length;r++){var n=e[r];if(this.transformsMap[n.type])throw new Error('Transform with type \\\"'+n.type+'\\\" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},t.prototype.removeTransforms=function(t){for(var r=0,e=t=Array.isArray(t)?t:[t];r<e.length;r++){var n=e[r],a=this.transforms.indexOf(n);a>-1&&this.transforms.splice(a,1),delete this.transformsMap[n.type]}return this},t.prototype.encode=function(t){var r=new c(t,this.transforms).transform();return this.serializer.serialize(r)},t.prototype.decode=function(t){var r=this.serializer.deserialize(t);return new l(r,this.transformsMap).transform()},t}();t.default=p}(z);var E=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};S.__esModule=!0,S.Decode=P=S.Encode=void 0;var k=E(O),C=E(w),D=E(A),I=E(j),N=E(z),R=[D.default,C.default,k.default,I.default],x=new N.default;x.addTransforms(R);var P=S.Encode=function(t){return JSON.parse(x.encode(t))};S.Decode=function(t){return x.decode(JSON.stringify(t))},function(r){var e=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var a=e(n),i=e(o),u=S;r.default=function(t,r,e){void 0===e&&(e=!0);for(var n=t,o={pointers:{},src:{npm:\\\"https://npmjs.com/package/console-feed\\\",github:\\\"https://github.com/samdenty99/console-feed\\\"}},s=function(t){var a=n[t];n[t]=function(){a.apply(this,arguments);var n=[].slice.call(arguments);setTimeout((function(){var a=i.default(t,n);if(a){var o=a;e&&(o=u.Encode(a)),r(o,a)}}))},o.pointers[t]=a},f=0,c=a.default;f<c.length;f++)s(c[f]);return n.feed=o,n}}(e),r(e)(window.console,(function(t){var r=P(t);parent.postMessage({type:\\\"console\\\",codesandbox:!0,log:Array.isArray(r)?r[0]:r,channelId:scope.channelId},\\\"*\\\")}));\\n\";\n\n/* eslint-disable @typescript-eslint/ban-ts-comment, @typescript-eslint/explicit-function-return-type, no-restricted-globals, @typescript-eslint/no-explicit-any  */\nfunction setupHistoryListeners(_a) {\n    var scope = _a.scope;\n    // @ts-ignore\n    var origHistoryProto = window.history.__proto__;\n    var historyList = [];\n    var historyPosition = 0;\n    var dispatchMessage = function (url) {\n        parent.postMessage({\n            type: \"urlchange\",\n            url: url,\n            back: historyPosition > 0,\n            forward: historyPosition < historyList.length - 1,\n            channelId: scope.channelId\n        }, \"*\");\n    };\n    function pushHistory(url, state) {\n        // remove \"future\" locations\n        historyList.splice(historyPosition + 1);\n        historyList.push({ url: url, state: state });\n        historyPosition = historyList.length - 1;\n    }\n    Object.assign(window.history, {\n        go: function (delta) {\n            var newPos = historyPosition + delta;\n            if (newPos >= 0 && newPos <= historyList.length - 1) {\n                historyPosition = newPos;\n                var _a = historyList[historyPosition], url = _a.url, state = _a.state;\n                origHistoryProto.replaceState.call(window.history, state, \"\", url);\n                var newURL = document.location.href;\n                dispatchMessage(newURL);\n                window.dispatchEvent(new PopStateEvent(\"popstate\", { state: state }));\n            }\n        },\n        back: function () {\n            window.history.go(-1);\n        },\n        forward: function () {\n            window.history.go(1);\n        },\n        pushState: function (state, title, url) {\n            origHistoryProto.replaceState.call(window.history, state, title, url);\n            pushHistory(url, state);\n            dispatchMessage(document.location.href);\n        },\n        replaceState: function (state, title, url) {\n            origHistoryProto.replaceState.call(window.history, state, title, url);\n            historyList[historyPosition] = { state: state, url: url };\n            dispatchMessage(document.location.href);\n        }\n    });\n    function handleMessage(_a) {\n        var data = _a.data;\n        if (data.type === \"urlback\") {\n            history.back();\n        }\n        else if (data.type === \"urlforward\") {\n            history.forward();\n        }\n        else if (data.type === \"refresh\") {\n            document.location.reload();\n        }\n    }\n    window.addEventListener(\"message\", handleMessage);\n}\n\n/* eslint-disable @typescript-eslint/ban-ts-comment */\nvar scripts = [\n    { code: setupHistoryListeners.toString(), id: \"historyListener\" },\n    {\n        code: \"function consoleHook({ scope }) {\" + consoleHook + \"\\n};\",\n        id: \"consoleHook\"\n    },\n];\nvar injectScriptToIframe = function (iframe, channelId) {\n    scripts.forEach(function (_a) {\n        var _b;\n        var code = _a.code, id = _a.id;\n        var message = {\n            uid: id,\n            type: INJECT_MESSAGE_TYPE,\n            code: \"exports.activate = \" + code,\n            scope: { channelId: channelId }\n        };\n        (_b = iframe.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage(message, \"*\");\n    });\n};\n\n/* eslint-disable no-console,@typescript-eslint/no-explicit-any,prefer-rest-params,@typescript-eslint/explicit-module-boundary-types */\nvar SandpackNode = /** @class */ (function (_super) {\n    __extends(SandpackNode, _super);\n    function SandpackNode(selector, sandboxInfo, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, selector, sandboxInfo, __assign(__assign({}, options), { bundlerURL: options.bundlerURL })) || this;\n        _this._modulesCache = new Map();\n        _this.messageChannelId = generateRandomId();\n        _this._initPromise = null;\n        _this.emitter = new EventEmitter();\n        // Assign iframes\n        _this.manageIframes(selector);\n        // Init emulator\n        _this.emulator = new Nodebox({\n            iframe: _this.emulatorIframe,\n            runtimeUrl: _this.options.bundlerURL\n        });\n        // Trigger initial compile\n        _this.updateSandbox(sandboxInfo);\n        return _this;\n    }\n    // Initialize nodebox, should only ever be called once\n    SandpackNode.prototype._init = function (files) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.emulator.connect()];\n                    case 1:\n                        _a.sent();\n                        // 2. Setup\n                        return [4 /*yield*/, this.emulator.fs.init(files)];\n                    case 2:\n                        // 2. Setup\n                        _a.sent();\n                        // 2.1 Other dependencies\n                        return [4 /*yield*/, this.globalListeners()];\n                    case 3:\n                        // 2.1 Other dependencies\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * It initializes the emulator and provide it with files, template and script to run\n     */\n    SandpackNode.prototype.compile = function (files) {\n        return __awaiter(this, void 0, void 0, function () {\n            var shellId, err_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 5, , 6]);\n                        // 1. Init\n                        this.status = \"initializing\";\n                        this.dispatch({ type: \"start\", firstLoad: true });\n                        if (!this._initPromise) {\n                            this._initPromise = this._init(files);\n                        }\n                        return [4 /*yield*/, this._initPromise];\n                    case 1:\n                        _a.sent();\n                        this.dispatch({ type: \"connected\" });\n                        return [4 /*yield*/, this.createShellProcessFromTask(files)];\n                    case 2:\n                        shellId = (_a.sent()).id;\n                        // 4. Launch Preview\n                        return [4 /*yield*/, this.createPreviewURLFromId(shellId)];\n                    case 3:\n                        // 4. Launch Preview\n                        _a.sent();\n                        return [4 /*yield*/, this.setLocationURLIntoIFrame()];\n                    case 4:\n                        _a.sent();\n                        // 5. Returns to consumer\n                        this.dispatchDoneMessage();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _a.sent();\n                        this.dispatch({\n                            type: \"action\",\n                            action: \"notification\",\n                            notificationType: \"error\",\n                            title: getMessageFromError(err_1)\n                        });\n                        this.dispatch({ type: \"done\", compilatonError: true });\n                        return [3 /*break*/, 6];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * It creates a new shell and run the starting task\n     */\n    SandpackNode.prototype.createShellProcessFromTask = function (files) {\n        return __awaiter(this, void 0, void 0, function () {\n            var packageJsonContent;\n            var _a;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        packageJsonContent = readBuffer(files[\"/package.json\"]);\n                        this.emulatorCommand = findStartScriptPackageJson(packageJsonContent);\n                        this.emulatorShellProcess = this.emulator.shell.create();\n                        // Shell listeners\n                        return [4 /*yield*/, this.emulatorShellProcess.on(\"exit\", function (exitCode) {\n                                _this.dispatch({\n                                    type: \"action\",\n                                    action: \"notification\",\n                                    notificationType: \"error\",\n                                    title: createError(\"Error: process.exit(\" + exitCode + \") called.\")\n                                });\n                            })];\n                    case 1:\n                        // Shell listeners\n                        _b.sent();\n                        return [4 /*yield*/, this.emulatorShellProcess.on(\"progress\", function (data) {\n                                var _a, _b;\n                                if (data.state === \"command_running\" ||\n                                    data.state === \"starting_command\") {\n                                    _this.dispatch({\n                                        type: \"shell/progress\",\n                                        data: __assign(__assign({}, data), { command: [\n                                                (_a = _this.emulatorCommand) === null || _a === void 0 ? void 0 : _a[0],\n                                                (_b = _this.emulatorCommand) === null || _b === void 0 ? void 0 : _b[1].join(\" \"),\n                                            ].join(\" \") })\n                                    });\n                                    _this.status = \"installing-dependencies\";\n                                    return;\n                                }\n                                _this.dispatch({ type: \"shell/progress\", data: data });\n                            })];\n                    case 2:\n                        _b.sent();\n                        this.emulatorShellProcess.stdout.on(\"data\", function (data) {\n                            _this.dispatch({ type: \"stdout\", payload: { data: data, type: \"out\" } });\n                        });\n                        this.emulatorShellProcess.stderr.on(\"data\", function (data) {\n                            _this.dispatch({ type: \"stdout\", payload: { data: data, type: \"err\" } });\n                        });\n                        return [4 /*yield*/, (_a = this.emulatorShellProcess).runCommand.apply(_a, this.emulatorCommand)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.createPreviewURLFromId = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            var url;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.iframePreviewUrl = undefined;\n                        return [4 /*yield*/, this.emulator.preview.getByShellId(id)];\n                    case 1:\n                        url = (_a.sent()).url;\n                        this.iframePreviewUrl = url + this.options.startRoute;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Nodebox needs to handle two types of iframes at the same time:\n     *\n     * 1. Runtime iframe: where the emulator process runs, which is responsible\n     *    for creating the other iframes (hidden);\n     * 2. Preview iframes: any other node process that contains a PORT (public);\n     */\n    SandpackNode.prototype.manageIframes = function (selector) {\n        var _a;\n        /**\n         * Pick the preview iframe\n         */\n        if (typeof selector === \"string\") {\n            var element = document.querySelector(selector);\n            nullthrows(element, \"The element '\" + selector + \"' was not found\");\n            this.iframe = document.createElement(\"iframe\");\n        }\n        else {\n            this.iframe = selector;\n        }\n        // Set preview iframe styles\n        setPreviewIframeProperties(this.iframe, this.options);\n        nullthrows(this.iframe.parentNode, \"The given iframe does not have a parent.\");\n        /**\n         * Create the runtime iframe, which is hidden sibling\n         * from the preview one\n         */\n        this.emulatorIframe = document.createElement(\"iframe\");\n        this.emulatorIframe.classList.add(\"sp-bridge-frame\");\n        (_a = this.iframe.parentNode) === null || _a === void 0 ? void 0 : _a.appendChild(this.emulatorIframe);\n    };\n    SandpackNode.prototype.setLocationURLIntoIFrame = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.iframePreviewUrl) return [3 /*break*/, 2];\n                        return [4 /*yield*/, loadPreviewIframe(this.iframe, this.iframePreviewUrl)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Send all messages and events to tell to the\n     * consumer that the bundler is ready without any error\n     */\n    SandpackNode.prototype.dispatchDoneMessage = function () {\n        this.status = \"done\";\n        this.dispatch({ type: \"done\", compilatonError: false });\n        if (this.iframePreviewUrl) {\n            this.dispatch({\n                type: \"urlchange\",\n                url: this.iframePreviewUrl,\n                back: false,\n                forward: false\n            });\n        }\n    };\n    SandpackNode.prototype.globalListeners = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        window.addEventListener(\"message\", function (event) {\n                            if (event.data.type === PREVIEW_LOADED_MESSAGE_TYPE) {\n                                injectScriptToIframe(_this.iframe, _this.messageChannelId);\n                            }\n                            if (event.data.type === \"urlchange\" &&\n                                event.data.channelId === _this.messageChannelId) {\n                                _this.dispatch({\n                                    type: \"urlchange\",\n                                    url: event.data.url,\n                                    back: event.data.back,\n                                    forward: event.data.forward\n                                });\n                            }\n                            else if (event.data.channelId === _this.messageChannelId) {\n                                _this.dispatch(event.data);\n                            }\n                        });\n                        return [4 /*yield*/, this.emulator.fs.watch([\"*\"], [\n                                \".next\",\n                                \"node_modules\",\n                                \"build\",\n                                \"dist\",\n                                \"vendor\",\n                                \".config\",\n                                \".vuepress\",\n                            ], function (message) { return __awaiter(_this, void 0, void 0, function () {\n                                var event, path, type, _a, content, newContent, err_2;\n                                return __generator(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0:\n                                            if (!message)\n                                                return [2 /*return*/];\n                                            event = message;\n                                            path = \"newPath\" in event\n                                                ? event.newPath\n                                                : \"path\" in event\n                                                    ? event.path\n                                                    : \"\";\n                                            return [4 /*yield*/, this.emulator.fs.stat(path)];\n                                        case 1:\n                                            type = (_b.sent()).type;\n                                            if (type !== \"file\")\n                                                return [2 /*return*/, null];\n                                            _b.label = 2;\n                                        case 2:\n                                            _b.trys.push([2, 10, , 11]);\n                                            _a = event.type;\n                                            switch (_a) {\n                                                case \"change\": return [3 /*break*/, 3];\n                                                case \"create\": return [3 /*break*/, 3];\n                                                case \"remove\": return [3 /*break*/, 5];\n                                                case \"rename\": return [3 /*break*/, 6];\n                                                case \"close\": return [3 /*break*/, 8];\n                                            }\n                                            return [3 /*break*/, 9];\n                                        case 3: return [4 /*yield*/, this.emulator.fs.readFile(event.path, \"utf8\")];\n                                        case 4:\n                                            content = _b.sent();\n                                            this.dispatch({\n                                                type: \"fs/change\",\n                                                path: event.path,\n                                                content: content\n                                            });\n                                            this._modulesCache.set(event.path, writeBuffer(content));\n                                            return [3 /*break*/, 9];\n                                        case 5:\n                                            this.dispatch({\n                                                type: \"fs/remove\",\n                                                path: event.path\n                                            });\n                                            this._modulesCache[\"delete\"](event.path);\n                                            return [3 /*break*/, 9];\n                                        case 6:\n                                            this.dispatch({\n                                                type: \"fs/remove\",\n                                                path: event.oldPath\n                                            });\n                                            this._modulesCache[\"delete\"](event.oldPath);\n                                            return [4 /*yield*/, this.emulator.fs.readFile(event.newPath, \"utf8\")];\n                                        case 7:\n                                            newContent = _b.sent();\n                                            this.dispatch({\n                                                type: \"fs/change\",\n                                                path: event.newPath,\n                                                content: newContent\n                                            });\n                                            this._modulesCache.set(event.newPath, writeBuffer(newContent));\n                                            return [3 /*break*/, 9];\n                                        case 8: return [3 /*break*/, 9];\n                                        case 9: return [3 /*break*/, 11];\n                                        case 10:\n                                            err_2 = _b.sent();\n                                            this.dispatch({\n                                                type: \"action\",\n                                                action: \"notification\",\n                                                notificationType: \"error\",\n                                                title: getMessageFromError(err_2)\n                                            });\n                                            return [3 /*break*/, 11];\n                                        case 11: return [2 /*return*/];\n                                    }\n                                });\n                            }); })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * PUBLIC Methods\n     */\n    SandpackNode.prototype.restartShellProcess = function () {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.emulatorShellProcess && this.emulatorCommand)) return [3 /*break*/, 3];\n                        // 1. Set the loading state and clean the URL\n                        this.dispatch({ type: \"start\", firstLoad: true });\n                        this.status = \"initializing\";\n                        // 2. Exit shell\n                        return [4 /*yield*/, this.emulatorShellProcess.kill()];\n                    case 1:\n                        // 2. Exit shell\n                        _b.sent();\n                        (_a = this.iframe) === null || _a === void 0 ? void 0 : _a.removeAttribute(\"attr\");\n                        this.emulator.fs.rm(\"/node_modules/.vite\", {\n                            recursive: true,\n                            force: true\n                        });\n                        // 3 Run command again\n                        return [4 /*yield*/, this.compile(Object.fromEntries(this._modulesCache))];\n                    case 2:\n                        // 3 Run command again\n                        _b.sent();\n                        _b.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.updateSandbox = function (setup) {\n        var _this = this;\n        var _a;\n        var modules = fromBundlerFilesToFS(setup.files);\n        /**\n         * Update file changes\n         */\n        if (((_a = this.emulatorShellProcess) === null || _a === void 0 ? void 0 : _a.state) === \"running\") {\n            Object.entries(modules).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (!_this._modulesCache.get(key) ||\n                    readBuffer(value) !== readBuffer(_this._modulesCache.get(key))) {\n                    _this.emulator.fs.writeFile(key, value, { recursive: true });\n                }\n            });\n            return;\n        }\n        /**\n         * Pass init files to the bundler\n         */\n        this.dispatch({\n            codesandbox: true,\n            modules: modules,\n            template: setup.template,\n            type: \"compile\"\n        });\n        /**\n         * Add modules to cache, this will ensure uniqueness changes\n         *\n         * Keep it after the compile action, in order to update the cache at the right moment\n         */\n        Object.entries(modules).forEach(function (_a) {\n            var key = _a[0], value = _a[1];\n            _this._modulesCache.set(key, writeBuffer(value));\n        });\n    };\n    SandpackNode.prototype.dispatch = function (message) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        _c = message.type;\n                        switch (_c) {\n                            case \"compile\": return [3 /*break*/, 1];\n                            case \"refresh\": return [3 /*break*/, 2];\n                            case \"urlback\": return [3 /*break*/, 4];\n                            case \"urlforward\": return [3 /*break*/, 4];\n                            case \"shell/restart\": return [3 /*break*/, 5];\n                            case \"shell/openPreview\": return [3 /*break*/, 6];\n                        }\n                        return [3 /*break*/, 7];\n                    case 1:\n                        this.compile(message.modules);\n                        return [3 /*break*/, 8];\n                    case 2: return [4 /*yield*/, this.setLocationURLIntoIFrame()];\n                    case 3:\n                        _d.sent();\n                        return [3 /*break*/, 8];\n                    case 4:\n                        (_b = (_a = this.iframe) === null || _a === void 0 ? void 0 : _a.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage(message, \"*\");\n                        return [3 /*break*/, 8];\n                    case 5:\n                        this.restartShellProcess();\n                        return [3 /*break*/, 8];\n                    case 6:\n                        window.open(this.iframePreviewUrl, \"_blank\");\n                        return [3 /*break*/, 8];\n                    case 7:\n                        this.emitter.dispatch(message);\n                        _d.label = 8;\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.listen = function (listener) {\n        return this.emitter.listener(listener);\n    };\n    SandpackNode.prototype.destroy = function () {\n        this.emulatorIframe.remove();\n        this.emitter.cleanup();\n    };\n    return SandpackNode;\n}(SandpackClient));\n\nexport { SandpackNode };\n"],"names":["SandpackClient","iframeSelector","sandboxSetup","options","this","status","prototype","updateOptions","dequal","updateSandbox","_sandboxSetup","_isInitializationCompile","Error","destroy","dispatch","_message","listen","_listener","TokenType","EventEmitter","listeners","listenersCount","channelId","Math","floor","random","cleanup","message","Object","values","forEach","listener","_this","listenerId","isCommand","char","test","isAlpha","isOperator","isArgument","isString","isEnvVar","toUpperCase","operators","Map","type","AND","OR","PIPE","Argument","counter","generateRandomId","Date","now","round","toString","writeBuffer","content","TextEncoder","encode","readBuffer","TextDecoder","decode","fromBundlerFilesToFS","files","entries","reduce","acc","_a","key","value","code","findStartScriptPackageJson","packageJson","scripts","possibleKeys","JSON","parse","e","createError","invariant","_loop_1","index","candidate","env_1","command_1","args_1","input","current","tokens","parseCommand","length","Command","parseOperator","get","parseArgument","parseString","openCloseQuote","String","parseEnvVars","parseSingleEnv","pair","EnvVar","currentChar","push","tokenize","item","commandNotFoundYet","env","state_1","getMessageFromError","error","_checkPrivateRedeclaration","obj","privateCollection","has","TypeError","_classPrivateMethodGet","receiver","privateSet","fn","_classExtractFieldDescriptor","privateMap","action","_classPrivateFieldGet","descriptor","call","_classPrivateFieldSet","set","writable","__create","create","__defProp","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__getProtoOf","getPrototypeOf","__hasOwnProp","hasOwnProperty","__commonJS","cb","mod","exports","__toESM","isNodeMode","target","to","from","except","desc","_step","_iterator","_createForOfIteratorHelper","_loop","enumerable","s","n","done","err","f","__copyProps","__esModule","__publicField","configurable","__defNormalProp","__accessCheck","member","msg","__privateGet","getter","__privateAdd","WeakSet","add","__privateSet","setter","__privateMethod","method","require_pad","module","num","size","substr","require_fingerprint_browser","pad","window","self","globalCount","keys","clientId","navigator","mimeTypes","userAgent","require_getRandomValue_browser","getRandomValue","lim","crypto","msCrypto","pow","abs","getRandomValues","Uint32Array","require_cuid","fingerprint","c","blockSize","base","discreteValues","randomBlock","safeCounter","cuid3","getTime","slug","date","slice","print","isCuid","stringToCheck","startsWith","isSlug","stringLength","require_createDeferredExecutor","createDeferredExecutor","executor","resolve","reject","state","data","result","Promise","then","reason","queueMicrotask","rejectionReason","require_DeferredPromise","_executor","_decorate","DeferredPromise","createDeferredExecutor_1","DeferredPromise4","WeakMap","_Promise","_inherits","_super","_createSuper","arguments","undefined","_classCallCheck","deferredExecutor","originalResolve","originalReject","_assertThisInitialized","_classPrivateFieldInitSpec","_defineProperty","_createClass","onFulfilled","onRejected","_decorate2","_get","_getPrototypeOf","onfinally","_wrapNativeSuper","promise","defineProperties","require_build","__createBinding","o","m","k","k2","__exportStar","exports2","p","require_MemoryLeakError","MemoryLeakError","_Error","_super2","emitter","count","_this2","concat","name","require_Emitter","Emitter","_events","_maxListeners","_hasWarnedAboutPotentialMemortyLeak","_getListeners","getListeners_fn","_removeListener","removeListener_fn","_wrapOnceListener","wrapOnceListener_fn","_internalEmit","internalEmit_fn","MemoryLeakError_1","_Emitter","defaultMaxListeners","maxListeners","Array","eventName","_this3","_len","_key","apply","nextListeners","listenerCount","memoryLeakWarning","console","warn","addListener","prependListener","removeListener","delete","clear","Emitter2","indexOf","splice","_this4","onceListener","_len2","_key2","internalEventName","emit","require_lib","import_cuid","POSITIONALS_EXP","format","_len3","positionals","_key3","positionalIndex","formattedMessage","replace","match","isEscaped","_","flag","positional","Number","stringify","json","serializePositional","join","InvariantError","_Error2","_super3","_this5","_len4","_key4","stack","nextStack","split","cleanErrorStack","predicate","_len5","_key5","_construct","as","ErrorConstructor","isConstructor","_len6","_key6","import_deferred_promise","FLAG","localStorage","CYAN","COLOR_SCOPE","preview","emulator","runtime","bridge","createDebug","scope","_console","cleanMessage","_len7","_key7","debug","includes","MessageSender","_this9","EventTarget","channel","MessageChannel","receiverPort","port1","receiverReadyPromise","handshakeListener","addEventListener","removeEventListener","onmessage","evt","payload","dispatchEvent","MessageEvent","_handshake","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","handshakePromise","rejectionTimeout","wrap","_context2","prev","next","postMessage","port2","on","clearTimeout","setTimeout","abrupt","stop","event","_send","_callee3","operationPromise","operationId","handleOperationDone","handleOperationFailed","_this10","_args3","_context3","default","doneEvent","data2","listenerPayload","_objectSpread","failEvent","finally","_x2","import_deferred_promise3","import_cuid2","FileSystemApi","_init","_callee4","_context4","send","_x3","_readFile","_callee5","path","encoding","response","_context5","catch","cause","sent","_x4","_x5","_writeFile","_callee6","recursive","_context6","_x6","_x7","_x8","_readdir","_callee7","_context7","_x9","_mkdir","_callee8","_context8","_x10","_x11","_stat","_callee9","_context9","_x12","_rm","_callee10","_ref2","force","_context10","_x13","_x14","_watch","_callee11","excludes","watcherId","_this11","_context11","_ref3","dispose","_x15","_x16","_x17","import_strict_event_emitter","ShellApi","ShellProcess","_this12","stdout","stderr","stdin","write","id","workerId","forwardStdEvents","_this13","_runCommand","_callee12","command","args","shellInfo","_args12","_context12","_x18","_x19","_on","_callee13","_this14","_context13","t0","_ref4","_ref5","exitCode","_x20","_x21","_kill","_callee14","_this15","_context14","import_deferred_promise2","PreviewApi","_waitFor","_callee15","timeout","readyPromise","rejectTimeout","previewInformation","foundPreview","_args15","_context15","sourceShellId","port","url","_ref6","_x22","_x23","_getByShellId","_callee16","_context16","waitFor","_x24","_x25","_waitForPort","_callee17","_context17","_x26","_x27","debug2","Nodebox","iframe","runtimeUrl","isConnected","_connect","_callee18","_this$options","cdnUrl","connectionPromise","frameLoadPromise","_this16","_context18","contentWindow","setAttribute","once","handshake","fileSystemApi","shellApi","previewApi","loadPreviewIframe","__awaiter","tries","__generator","nullthrows","triesToSetUrl","onLoadPage","origHistoryProto","history","__proto__","historyList","historyPosition","dispatchMessage","parent","back","forward","assign","go","delta","newPos","replaceState","newURL","document","location","href","PopStateEvent","pushState","title","pushHistory","reload","SandpackNode","selector","sandboxInfo","__assign","bundlerURL","_modulesCache","messageChannelId","_initPromise","manageIframes","emulatorIframe","__extends","label","connect","fs","init","globalListeners","compile","shellId","err_1","trys","firstLoad","createShellProcessFromTask","createPreviewURLFromId","setLocationURLIntoIFrame","dispatchDoneMessage","notificationType","compilatonError","packageJsonContent","_b","emulatorCommand","emulatorShellProcess","shell","runCommand","iframePreviewUrl","getByShellId","startRoute","element","querySelector","createElement","style","border","width","height","overflow","allow","parentNode","classList","appendChild","uid","watch","newContent","err_2","newPath","stat","readFile","oldPath","restartShellProcess","kill","removeAttribute","rm","fromEntries","setup","modules","codesandbox","template","writeFile","_d","open","remove"],"sourceRoot":""}